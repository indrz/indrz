(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{358:function(e,t,o){var content=o(417);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(12).default)("5125b290",content,!0,{sourceMap:!1})},359:function(e,t,o){var content=o(419);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(12).default)("1da7b90a",content,!0,{sourceMap:!1})},360:function(e,t,o){"use strict";o(22),o(37);var r=o(354),n=o(386),c=o(393),l=new r.c({image:new c.a({src:"/media/poi_icons/route_marker_C.png",anchor:[.5,1]}),zIndex:6}),d=new r.c({image:new c.a({src:"/media/poi_icons/flag.png",anchor:[.5,1]}),zIndex:6}),f=new r.c({image:new c.a({src:"/media/poi_icons/flag-checkered.png",anchor:[.5,1]}),zIndex:6}),m=new r.c({stroke:new n.a({color:"#ba4682",width:4}),zIndex:6}),h=new r.c({stroke:new n.a({color:"#ba4682",width:2,lineDash:[.1,5],opacity:.5}),zIndex:6});t.a={routeActiveStyle:m,routeInactiveStyle:h,routeMarkerCStyle:l,faCircleSolidStyle:d,faFlagCheckeredStyle:f,setPoiStyleOnLayerSwitch:function(e,t){var o=e?e.replace(".","_pin."):"";if(!o)return new r.c({image:new c.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:0,src:"./noimage.png"})});var n=new r.c({image:new c.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.4,src:o})}),l=new r.c({image:new c.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:o})});return t?l:n},createPoiStyle:function(e,t){var o=e.replace(".","_pin."),n=new r.c({image:new c.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.4,src:o})}),l=new r.c({image:new c.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:o})});return"y"===t?["education_active","access_active","security_active","infrastructure_active","services_active"].includes(e)?n:l:n}}},363:function(e,t,o){"use strict";o(41);var r=o(13),n=(o(25),o(77),o(48),o(530)),c=o(607),l=o(531),d=o(391),f=o(467),m=o(496),h=o(337),y=o(502),v=o(495),P=o(426),w=o(357),_=o(367),C=o(381),x=o(354),I=o(386),k=o(393),S=o(421),L=o(458),E=o(327),O=o(360),F=o(372),N=o(131),$=o(78),M=o(385),T=function(e,t,o,r){var n=Object(h.d)("EPSG:3857"),c="{Layer}/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}"+t,l=["https://maps1.wien.gv.at/basemap/"+c,"https://maps2.wien.gv.at/basemap/"+c,"https://maps3.wien.gv.at/basemap/"+c,"https://maps4.wien.gv.at/basemap/"+c],d=new P.b({origin:[-20037508.3428,20037508.3428],extent:[977650,5838030,1913530,6281290],resolutions:[156543.03392811998,78271.51696419998,39135.758481959994,19567.879241008,9783.939620504,4891.969810252,2445.984905126,1222.9924525644,611.4962262807999,305.74811314039994,152.87405657047998,76.43702828523999,38.21851414248,19.109257071295996,9.554628535647998,4.777314267823999,2.3886571339119995,1.1943285669559998,.5971642834779999,.29858214174039993,.14929107086936],matrixIds:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]}),f=new v.a({tilePixelRatio:1,projection:n,layer:e,style:"normal",matrixSet:"google3857",urls:l,crossOrigin:"anonymous",requestEncoding:"REST",tileGrid:d,attributions:'Â© <a href="https://www.basemap.at/">Basemap.at       </a>'});return new y.a({name:e,source:f,minResolution:.298582141738,visible:o,type:"background"})},V=function(e){e.forEach(function(e){return e.setVisible(!1)})},z=function(e,t,map){if(t.length>0){var o=t.find(function(t){var o=t.getProperties();return(o.name||o.floorName).toLowerCase()===e.toLowerCase()});o&&(o.setVisible(!0),map.getLayers().forEach(function(e){if("RouteFromSearch"===e.get("name")){var t=o.getProperties().floorName;e.getSource().getFeatures().forEach(function(e){e.getProperties().floor_name===t?e.setStyle(O.a.routeActiveStyle):e.setStyle(O.a.routeInactiveStyle)})}}))}},R=function(e,t,map){var o=e?e.getProperties().floorName:"",r=t.switchableLayers.find(function(e){return e.getProperties().floorName===o});r&&Y(r.getProperties().name,t.switchableLayers,map)},B=function(e,t,o,r,n,c,l){l=l||0;var d="",f="",m="";c=c||0;return 0===c?f="searchResListItem_"+e:(f="searchResListItem_"+e+"-"+c,d='<img src="'+l+'" alt="POI" style="height: 25px; padding-right:5px;">'),m='<a href="#" onclick="showRes('+t+","+o+","+c+')" id="'+f+'" class="list-group-item indrz-search-res" >'+r+' <span class="badge">Floor '+n+"</span> </a>",""!==l&&(m='<a href="#" onclick="showRes('+t+","+o+","+c+')" id="'+f+'" class="list-group-item indrz-search-res" >  '+d+r+' <span class="badge">Floor '+n+"</span> </a>"),m},image=new k.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"/static/homepage/img/other.png"}),U={Point:[new x.c({image:image})],LineString:[new x.c({stroke:new I.a({color:"#68ff5b",width:1})})],MultiLineString:[new x.c({stroke:new I.a({color:"#68ff5b",width:1})})],MultiPoint:[new x.c({image:image})],MultiPolygon:[new x.c({stroke:new I.a({color:"#4ff0ff",width:3}),fill:new S.a({color:"rgba(38, 215, 255, 0.4)"})})],Polygon:[new x.c({stroke:new I.a({color:"#4ff0ff",width:3}),fill:new S.a({color:"rgba(38, 215, 255, 0.4)"})})],GeometryCollection:[new x.c({stroke:new I.a({color:"magenta",width:2}),fill:new S.a({color:"magenta"}),image:new L.a({radius:10,fill:null,stroke:new I.a({color:"magenta"})})})],Circle:[new x.c({stroke:new I.a({color:"red",width:2}),fill:new S.a({color:"rgba(255,0,0,0.2)"})})]},j=function(e,t){var o=e.getGeometry().getType();if("MultiPolygon"===o)return U[e.getGeometry().getType()];if("MultiPoint"===o){var r=new k.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:e.get("icon"),opacity:1});return new x.c({image:r})}},A=function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat($.a.searchUrl,"/").concat(t),e.next=3,N.a.request({url:o});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(map,t,o,r,n,c,l,d,f,m,h,y,v,P,x,I){var k,S,L,O,N,$,M,T,V;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&map.removeLayer(r),k=new w.a,S=[],L={},I){e.next=10;break}return e.next=7,A(c);case 7:L=e.sent,e.next=11;break;case 10:L=I;case 11:return O=new C.a,N=O.readFeatures(L,{featureProjection:"EPSG:4326"}),k.addFeatures(N),k.forEachFeature(function(e){var t=e.get("name"),r=e.getGeometry().getExtent(),n=Object(E.x)(r),l=c,d=l=c===t?c:t,f=e.get("floor_name")?e.get("floor_name").toLowerCase():"",m=e.get("category_en"),h=e.get("roomcode"),y="";y=l!==h?" ("+h+")":"";var v="",P="";e.getProperties().hasOwnProperty("poi_id")?(v=e.get("poi_id"),P=e.get("icon"),o.poiId=e.get("poi_id"),o.src=e.get("src")):(o.poiId="noid",o.src=e.get("src"));var w='"'+l+'"';if(""!==m&&void 0!==m){var _=d+" ("+m+")";S.push(B(l,w,n,_,f,v,P))}else if(""!==h&&void 0!==h){var C=d+y;S.push(B(l,w,n,C,f,v,P))}else{var x=d;S.push(B(l,w,n,x,f,v,P))}}),$=Object(E.x)(k.getExtent()),M="",T="",1===N.length?(F.a.openIndrzPopup(o,d,f,m,h,y,v,P,x,N[0].getProperties(),$,N[0]),G(map.getView(),$,l),T=N[0].getProperties().floor_name?N[0].getProperties().floor_name.toLowerCase():"",M=t.switchableLayers.find(function(e){return e.getProperties().floorName===T}),R(M,t,map)):0===N.length?("<p href='#' class='list - group - item indrz - search - res'> Sorry nothing found</p>",console.log("<p href='#' class='list - group - item indrz - search - res'> Sorry nothing found</p>")):(V=k.getExtent(),map.getView().fit(V),map.getView().setZoom(l)),r=new _.a({source:k,style:j,title:"SearchLayer",name:"SearchLayer",zIndex:999}),map.getLayers().push(r),window.location.href="#map",e.abrupt("return",{searchLayer:r,floorName:T,searchResult:S});case 23:case"end":return e.stop()}},e)}));return function(t,o,r,n,c,l,d,f,m,h,y,v,P,w,_,C){return e.apply(this,arguments)}}(),G=function(view,e,t){view.animate({center:e,duration:2e3,zoom:t})},Y=function(e,t,map){V(t),z(e,t,map),M.a.setPoiFeatureVisibility(map,e)};t.a={getStartCenter:function(){return $.a.defaultCenterXY},getMapControls:function(){return[new n.a({collapsible:!1}),new c.a,new l.a({target:"zoom-control"})]},getWmsLayers:function(e){var t=[];e.forEach(function(e,o){var r=e.short_name.toLowerCase(),n=$.a.layerNamePrefix+r,c=function(e,t,o,r,n){return new f.a({source:new m.a({url:$.a.baseWmsUrl,params:{LAYERS:t,TILED:!0},serverType:"geoserver",crossOrigin:""}),visible:r,name:e,floorNumber:o,floorName:e.split($.a.layerNamePrefix)[1],type:"floor",zIndex:n,crossOrigin:"anonymous"})}(n,$.a.geoServerLayerPrefix+n,e.floor_num,0===o,3);t.push(c)});var o=new d.a({layers:t,name:"wms floor maps"});return{layers:t,layerGroup:o}},getLayers:function(){var e=T("bmapgrau",".png",!0),t=T("bmaporthofoto30cm",".jpg",!1);return{baseLayers:{ortho30cmBmapat:t,greyBmapat:e},switchableLayers:[],layerGroups:[new d.a({layers:[e,t],name:"background maps"}),new d.a({layers:[],id:99999,name:"poi group"}),new d.a({layers:[],id:900,name:"campus locations"})]}},hideLayers:V,setLayerVisible:z,activateFloor:R,activateLayer:Y,searchIndrz:D,zoomer:G}},372:function(e,t,o){"use strict";o(48),o(25);var r=o(78),n=window.location.href,c=function(e,t){var o="",r="";if(e.hasOwnProperty("room_code")&&e.room_code&&(r=e.room_code,o=e.room_code),e.hasOwnProperty("name")&&e.name)return o=e.name;if(e.hasOwnProperty("name_de")&&e.name_de)return o="de"===t?e.name_de:e.name||e.name_en;if(e.hasOwnProperty("short_name")){if(e.short_name)return o=e.short_name;if(r)return o=r}if(e.hasOwnProperty("label")){if(e.label)return o=e.label;if(r)return o=r}if(e.hasOwnProperty("key")){if(e.key)return o=e.key;if(r)return o=r}if(e.hasOwnProperty("campus_name")){if(e.campus_name)return o=e.campus_name;if(r)return o=r}return e.hasOwnProperty("room_external_id")&&e.room_external_id&&!o?o=e.room_external_id:e.room_code?o=e.room_code:o},l=function(p){if(p.hasOwnProperty("roomcode")){if(p.roomcode)return p.roomcode.split(".")[0]}else if(p.hasOwnProperty("building_name")&&(null!==p.building_name||""!==p.building_name||void 0!==p.building_name))return p.building_name;return""},d=function(e,t,o){"popupHomepage"===o&&(t='<a target="_blank" href="'+t+'">'+t+"</a>");var r=document.getElementById("popupTable").insertRow(0),n=r.insertCell(0),c=r.insertCell(1);n.innerHTML=e,c.innerHTML=t,n.setAttribute("class","no-wrap"),c.setAttribute("id",o)},f=function(e,map,t,o,r,c){var l=map.getView().calculateExtent(map.getSize()),d=map.getView().getZoom(),f=map.getView().getCenter(),m=f[0],h=f[1],y="/?campus=1&centerx="+m+"&centery="+h+"&zlevel="+d+"&floor="+c,data={};if("route"===e)y=o.routeUrl?o.routeUrl:"noid"!==o.startPoiId&&"noid"!==o.endPoiId||"noid"!==t.poiId?o.routeUrl:("undefined"===t.poiId&&""===t.poiId&&t.poiId,"/?campus=1&startstr="+o.startName+"&endstr="+o.endName);else if("search"===e)t.hasOwnProperty("external_id")&&(y=t.external_id===t.name?"/?campus=1&q="+t.external_id:"/?campus=1&q="+t.name),y=r.searchText?"/?campus=1&q="+r.searchText:"/?campus=1&q="+t.name;else if("map"===e)y="/?campus=1&centerx="+m+"&centery="+h+"&zlevel="+d+"&floor="+c;else if("bookId"===e)y=n+o.routeUrl;else{if("poiCatId"===e)return y=location.origin+"?"+t.poiCatShareUrl,{type:"poi",singlePoiUrl:location.origin+"?poi-id="+t.poiId+"&floor="+t.floor,poiCatUrl:y};y="wmsInfo"===e?n+"?campus=1&q="+t.wmsInfo:location.href}return data.extent=l,data.zoom=d,history.pushState(data,"live_url_update",y),location.href};t.a={closeIndrzPopup:function(e,t){for(var o in e.setPosition(void 0),t)t[o]=null;return e.setPosition(void 0),t.poiId="noid",t.poiCatId="noid",t.bookId=!1,t.bookCoords=!1,t.name=!1,!1},openIndrzPopup:function(e,t,o,f,m,h,y,v,P,w,_,C,x){var I=v.split(r.a.layerNamePrefix)[1].toUpperCase(),k=document.getElementById("popup-content");for(var S in e)e[S]=null;C=null!=C?C:-1,x=void 0!==x?x:[0,0],w.hasOwnProperty("poiId")&&(e.src="poi",e.poiId=w.poiId),w.hasOwnProperty("category")&&(e.src="poi",e.poiCatId=w.category),w.hasOwnProperty("spaceid")&&(e.spaceid=w.spaceid),w.hasOwnProperty("homepage")&&w.homepage&&w.homepage,w.hasOwnProperty("src")&&w.src&&(e.src=w.src),w.hasOwnProperty("space_type_id")&&(w.hasOwnProperty("src")&&(w.src?e.src=w.src:e.src="wms"),w.hasOwnProperty("id")&&(e.spaceid=w.id),w.hasOwnProperty("room_external_id")&&w.room_external_id&&(e.external_id=w.room_external_id)),w.hasOwnProperty("room_code")&&(e.wmsInfo=w.room_code,w.roomcode=w.room_code),w.hasOwnProperty("poi_id")?(w.poi_id,e.poiId=w.poi_id,w.hasOwnProperty("category")&&(e.poiCatId=w.category,e.poiCatName="de"===f?w.category_name_de:w.category_name_en,e.poiCatShareUrl=n+"?poi-cat-id="+e.poiCatId)):-1!==C&&"noid"===e.poiId&&"string"!=typeof C&&C.getId()&&(e.poiId=C.getId(),e.poiIdPopup=C.getId(),C.get("category")&&(e.poiCatId=C.get("category"),e.poiCatName="de"===f?C.get("category_name_de"):C.get("category_name_en"),e.poiCatShareUrl=n+"?poi-cat-id="+e.poiCatId)),"noid"!==e.poiId&&(e.poiCatShareUrl="poi-cat-id="+e.poiCatId),m=(m=_)||""!==m?_:w.centerGeometry.coordinates;var L,E=l(w),O=null,F=null,N=null;w.hasOwnProperty("capacity")&&w.capacity&&(N=w.capacity),w.hasOwnProperty("category_de")&&w.category_de&&(F="de"===f?w.category_de:w.category_en),w.hasOwnProperty("room_description")?w.name=w.room_description:w.hasOwnProperty("short_name")&&(w.name=w.short_name),w.hasOwnProperty("room_code")&&(w.roomcode=w.room_code),L=c(w,f),!0===w.hasOwnProperty("centroid")&&w.centroid,O=(w.label,w.roomcode);k.innerHTML='<h4 style="user-select: text;">'+L+"</h4>",k.innerHTML+="<div><p>",k.innerHTML+='<table id="popupTable" style="user-select: text;"></table>',w.hasOwnProperty("campus_name")||(void 0!==w.building_name&&""!==w.building_name&&d("Building: ",E,"popupBuilding"),w.hasOwnProperty("shelfID")&&d("Building: ",w.building,"popupBuilding"),N&&d("Capacity: ",N,"popupRoomCapacity"),O&&d("Room Number: ",O,"popupRoomCode"),F&&d("Category: ",F,"popupRoomCat"),w.room_external_id&&d("Room Code",w.room_external_id,"popupSpaceAks"),d("Floor Name: ",I,"popupFloorNumber")),e.roomcode?e.roomcode:O||e.name&&e.name,k.innerHTML+="</p></div>",e.name=L,e.coords=m,e.floor=v,e.roomcode=O,P.setPosition(_),P.setOffset(x)},getTitle:c,getBuildingLetter:l,addPoiTableRow:d,getRoomInfo:function(e,t){var o;return t.switchableLayers.forEach(function(element){e.toLowerCase()===(r.a.layerNamePrefix+element.getProperties().floorName).toLowerCase()&&(o=element.getSource())}),o},handleShareClick:function(map,e,t,o,r,n){var param="";return n?param="route":e.bookId?param="bookId":o.searchText?param="search":e.poiCatId?param="poiCatId":"wms"===e.src&&(param="wmsInfo"),f(param,map,e,t,o,r)},updateUrl:f}},385:function(e,t,o){"use strict";o(25);var r=o(357),n=o(367),c=o(381),l=o(391),d=o(327),f=o(360),m=o(363),h=o(372),y=o(78),v=o(131),P=function(data,e,t){var o="",l=new r.a,d=(new c.a).readFeatures(data,{featureProjection:"EPSG:4326"});return l.addFeatures(d),new n.a({source:l,style:function(e){var r=e.getProperties().floor_name;o=e.getProperties().name_en;var n=e.getProperties().icon;y.a.layerNamePrefix+r.toLowerCase()===t?e.setStyle(f.a.createPoiStyle(n,"y",r)):e.setStyle(f.a.createPoiStyle(n,"n",r))},title:o,name:o,id:e,active:!0,visible:!0,zIndex:999})};t.a={createPoilayer:P,poiExist:function(e,map){var t=void 0!==e.name?e.name:0,o=e.id,r=!1;return map.getLayers().forEach(function(e,i){e instanceof l.a&&e.getLayers().forEach(function(e,i){e.getProperties().id!==o&&e.getProperties().name!==t||(r=!0)})}),r},disablePoiById:function(e,map){map.getLayers().forEach(function(t,i){t instanceof l.a&&99999===t.getProperties().id&&t.getLayers().forEach(function(t){t.getProperties().id===e&&t.setVisible(!1)})})},removePoiById:function(e,map){map.getLayers().forEach(function(t,i){t instanceof l.a&&99999===t.getProperties().id&&t.getLayers().forEach(function(t){t.getProperties().id===e&&(t.setVisible(!1),map.removeLayer(t))})})},setPoiVisibility:function(e,map){map.getLayers().forEach(function(t){t instanceof l.a&&t.getLayers().forEach(function(t,i){t.getProperties().id===e&&(!0===t.getVisible()?t.setVisible(!1):t.setVisible(!0))})})},fetchPoi:function(e,map,t){return v.a.request({endPoint:"poi/cat/".concat(e,"/?format=json")}).then(function(o){return P(o.data,e,t)})},showSinglePoi:function(e,t,o,map,l,P){t.poiId=e;var w=map.getLayers().getArray().filter(function(t){return t.getProperties().id===e});w&&w.length&&map.removeLayer(w[0]);var _="",C=new r.a;return v.a.request({endPoint:"poi/".concat(e,"/?format=json")}).then(function(r){var v=(new c.a).readFeatures(r.data,{featureProjection:"EPSG:4326"});C.addFeatures(v);var w=Object(d.x)(C.getExtent());if(1===v.length){var x=v[0].getProperties(),I=x.geometry.getCoordinates();x.poiId=e,h.a.openIndrzPopup(t,null,e,"en",I,null,null,P,l,x,w,null,[0,-35]),m.a.zoomer(map.getView(),w,o),t.poiCatId=v[0].getProperties().category,t.poiCatShareUrl="?poi-cat-id="+v[0].getProperties().category;var k=new n.a({source:C,style:function(e,t){var o=e.getProperties().floor_name;_=e.getProperties().name||e.getProperties().name_en;var r=e.getProperties().category_icon_css_name;y.a.layerNamePrefix+o.toLowerCase()===P?e.setStyle(f.a.createPoiStyle(r,"y",o)):e.setStyle(f.a.createPoiStyle(r,"n",o))},title:_,name:_,id:e,active:!0,visible:!0,zIndex:999});return map.addLayer(k),k}})},setPoiFeatureVisibility:function(map,e){map.getLayers().forEach(function(t,i){t instanceof l.a&&("poi group"!==t.getProperties().name&&"POI-Gruppe"!==t.getProperties().name||t.getLayers().forEach(function(t,i){t.getSource().forEachFeature(function(t,i){y.a.layerNamePrefix+t.getProperties().floor_name.toLowerCase()!==e?t.setStyle(f.a.setPoiStyleOnLayerSwitch(t.getProperties().icon,!1)):t.setStyle(f.a.setPoiStyleOnLayerSwitch(t.getProperties().icon,!0))})}))})}}},416:function(e,t,o){"use strict";var r=o(358);o.n(r).a},417:function(e,t,o){(e.exports=o(11)(!1)).push([e.i,".poi{font-size:.875rem}.v-treeview-node__checkbox{display:none!important}",""])},418:function(e,t,o){"use strict";var r=o(359);o.n(r).a},419:function(e,t,o){(e.exports=o(11)(!1)).push([e.i,".floor-changer[data-v-044ea296]{position:absolute;right:10px;top:70px;overflow-y:auto}",""])},437:function(e,t,o){var content=o(534);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(12).default)("46b38ff5",content,!0,{sourceMap:!1})},440:function(e,t,o){var content=o(537);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(12).default)("2856376d",content,!0,{sourceMap:!1})},441:function(e,t,o){var content=o(541);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(12).default)("377e9227",content,!0,{sourceMap:!1})},453:function(e,t,o){"use strict";o(17),o(41);var r,n=o(13),c=o(152),l=o.n(c),d=o(131),f={name:"PointsOfInterest",props:{initialPoiCatId:{type:String,default:function(){return null}},initialPoiId:{type:String,default:function(){return null}},multi:{type:Boolean,default:function(){return!0}}},data:function(){return{files:{html:"mdi-language-html5",js:"mdi-nodejs",json:"mdi-json",md:"mdi-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",txt:"mdi-file-document-outline",xls:"mdi-file-excel"},tree:[],poiData:[],openedItems:[],forceReloadNode:!1,loading:!0,currentPoi:null}},watch:{tree:function(e,t){var o=[],r=[],n=[];!1===this.multi?(o=t,r=this.currentPoi):(t.length>e.length&&(o=l.a.differenceBy(t,e,"id")),e.length>t.length&&(r=l.a.differenceBy(e,t,"id")),n=l.a.intersectionBy(e,t,"id")),this.forceReloadNode&&e.length===t.length&&e[0].id===t[0].id&&(r=e,o=e,n=[],this.forceReloadNode=!1),this.$root.$emit("poiLoad",{newItems:r,oldItems:n,removedItems:o})}},mounted:function(){this.loadDataToPoiTree()},methods:{loadDataToPoiTree:(r=Object(n.a)(regeneratorRuntime.mark(function e(){var t,o,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPoiTreeData();case 2:(t=e.sent)&&t.data&&(this.poiData=t.data,this.initialPoiCatId?(o=this.findItem(Number(this.initialPoiCatId),this.poiData),this.tree=[o.data],setTimeout(function(){var e=r.$refs.poi;e.updateSelected(r.initialPoiCatId,!0),o.roots.reverse().forEach(function(t){e.updateOpen(t,!0)}),e.updateActive(r.initialPoiCatId,!0)},500)):this.initialPoiId&&setTimeout(function(){r.$emit("loadSinglePoi",r.initialPoiId)},500)),this.loading=!1;case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),onTreeClick:function(e){var t=this.$refs.poi,o=!t.selectedCache.has(e.id);t.updateSelected(e.id,!1===this.multi||o),t.updateActive(e.id,!1===this.multi||o),this.currentPoi=e.children||[e],this.$emit("selectPoiCategory",e),t.emitSelected()},onLocationClick:function(e){this.$emit("locationClick",e.centroid)},fetchPoiTreeData:function(){return d.a.request({endPoint:"poi/tree/"})},findItem:function(e,data){var t=this,o=null;return data.some(function(r){return r.id&&r.id===e?(o=r,!0):r.children&&(o=t.findItem(e,r.children))?(o.roots?o.roots.push(r.id):o={data:o,roots:[r.id]},!0):void 0}),o}}},m=(o(416),o(32)),h=o(36),y=o.n(h),v=o(120),P=o(124),w=o(628),component=Object(m.a)(f,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"text-center"},[e.loading?o("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):e._e()],1),e._v(" "),e.loading?e._e():o("v-treeview",{ref:"poi",staticClass:"poi",staticStyle:{overflow:"auto",width:"auto"},attrs:{"multiple-active":e.multi,items:e.poiData,"selected-color":"indigo","open-on-click":"",selectable:"","return-object":"","item-key":"id",dense:""},scopedSlots:e._u([{key:"label",fn:function(t){var r=t.item;return[o("div",{staticStyle:{width:"100%",height:"100%"},on:{click:function(t){return e.onTreeClick(r)}}},[e._v("\n        "+e._s(r["name_"+e.$i18n.locale])+"\n      ")])]}},{key:"prepend",fn:function(t){var r=t.item,n=t.open,c=t.active;return[o("img",c?{attrs:{src:r.icon.replace(".","_active.")},on:{click:function(t){return e.onTreeClick(r)}}}:{attrs:{src:r.icon},on:{click:function(t){return e.onTreeClick(r)}}}),e._v(" "),r.icon?o("v-icon",[e._v("\n        mdi-"+e._s(r.icon)+"\n      ")]):o("v-icon",[e._v("\n        "+e._s(n?"mdi-folder-open":"mdi-folder")+"\n      ")])]}}],null,!1,3889353604),model:{value:e.tree,callback:function(t){e.tree=t},expression:"tree"}})],1)},[],!1,null,null,null);t.a=component.exports;y()(component,{VIcon:v.a,VProgressCircular:P.a,VTreeview:w.a})},454:function(e,t,o){"use strict";o(133),o(48),o(22),o(24);var r=o(131),n=o(78),c={props:{floors:{type:Array,default:function(){return[]}}},data:function(){return{setSelection:null}},watch:{floors:function(){this.setSelection&&this.selectFloorWithCss(this.setSelection)}},methods:{fetchFloors:function(){return r.a.request({endPoint:"floor/"})},onFloorClick:function(e,t){var o=n.a.layerNamePrefix+e.short_name.toLowerCase();this.$emit("floorClick",o),this.selectFloorWithCss(e.short_name.toLowerCase(),t)},selectFloorWithCss:function(e,t){var o=this;e.includes(n.a.layerNamePrefix)&&(e=e.split(n.a.layerNamePrefix)[1]),setTimeout(function(){var r=o.$el.querySelectorAll("[role=listitem]"),n=o.floors.findIndex(function(t){return t.short_name.toLowerCase()===e.toLowerCase()});r.forEach(function(e){e.classList.remove("v-list-item--active","v-list-item--link")}),r.length&&n>-1&&(r[n].classList.add("v-list-item--active","v-list-item--link"),t||r[n].scrollIntoView())},500)},getFloorByFloorName:function(e){var t=e.split(n.a.layerNamePrefix)[1];if(!t)return{};var o=this.floors.filter(function(e){return e.short_name.toLowerCase()===t});return o&&o.length?o[0]:{}}}},l=(o(418),o(32)),d=o(36),f=o.n(d),m=o(384),h=o(121),y=o(76),v=o(33),P=o(123),component=Object(l.a)(c,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{staticClass:"mx-auto floor-changer",attrs:{"max-height":"400px"}},[o("v-list",{attrs:{dense:""}},[o("v-list-item-group",{attrs:{mandatory:"",color:"primary"}},e._l(e.floors,function(t,i){return o("v-list-item",{key:i,on:{click:function(o){return o.stopPropagation(),e.onFloorClick(t,!0)}}},[o("v-list-item-content",{staticStyle:{"min-width":"20px"}},[o("v-list-item-title",{domProps:{textContent:e._s(t.short_name)}})],1)],1)}),1)],1)],1)},[],!1,null,"044ea296",null);t.a=component.exports;f()(component,{VCard:m.a,VList:h.a,VListItem:y.a,VListItemContent:v.a,VListItemGroup:P.a,VListItemTitle:v.b})},455:function(e,t,o){"use strict";o(17);var r={name:"SnackBar",props:{timeout:{type:Number,default:function(){return 2e3}}},data:function(){return{show:!1,text:""}},created:function(){var e=this;this.$store.watch(function(e){return e.snackBar},function(){var t=e.$store.state.snackBar;""!==t&&(e.show=!0,e.text=t,e.$store.commit("SET_SNACKBAR",""))})}},n=o(32),c=o(36),l=o.n(c),d=o(145),f=o(608),component=Object(n.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-snackbar",{attrs:{timeout:e.timeout,top:!0},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v("\n  "+e._s(e.text)+"\n  "),o("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.show=!1}}},[e._v("\n    Close\n  ")])],1)},[],!1,null,"e4c8c062",null);t.a=component.exports;l()(component,{VBtn:d.a,VSnackbar:f.a})},533:function(e,t,o){"use strict";var r=o(437);o.n(r).a},534:function(e,t,o){(e.exports=o(11)(!1)).push([e.i,".indrz-zoom-control[data-v-01e9b512]{right:50px!important;bottom:100px!important;position:absolute}#id-map-switcher-widget[data-v-01e9b512]{position:absolute;right:45px!important;bottom:37px!important}",""])},536:function(e,t,o){"use strict";var r=o(440);o.n(r).a},537:function(e,t,o){(e.exports=o(11)(!1)).push([e.i,".speed-btn-panel[data-v-7bee4c01]{position:absolute;right:45px!important;bottom:70px!important}",""])},540:function(e,t,o){"use strict";var r=o(441);o.n(r).a},541:function(e,t,o){(e.exports=o(11)(!1)).push([e.i,".save-btn-panel[data-v-d0fbef16]{top:10px;position:absolute;left:calc(50% - 70px)}.poi[data-v-d0fbef16]{position:absolute;left:10px;top:70px;background:#fff;padding:15px;border-radius:5px}",""])},620:function(e,t,o){"use strict";o.r(t);o(65),o(66),o(3),o(41);var r,n,c=o(13),l=(o(77),o(25),o(453)),d=o(454),f=o(494),m=o(457),h=o(367),y=o(357),v=o(354),P=o(393),w=o(421),_=o(386),C=o(451),x=o(487),I=o(488),k=o(500),S=o(489),L=o(377),E=o(401),O=o(365),F=o(408),N=o(392),$=o(385),M=o(360),T=o(78),V=o(363),z=o(131),R=(o(434),{name:"Map",props:{selectedPoiCategory:{type:Object,default:function(){return null}},activeFloor:{type:Object,default:function(){return null}}},data:function(){return{mapId:"mapContainer",map:null,view:null,layers:[],isSatelliteMap:!0,vectorInteractionLayer:null,isAddPoiMode:!1,currentEditingPoi:null,modify:null,selectedPoi:null,deleteConfirm:!1}},mounted:(n=Object(c.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializeMap();case 2:this.initializeEventHandlers();case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),methods:{initializeEventHandlers:function(){this.$root.$on("addPoiClick",this.addInteractions),this.$root.$on("editPoiClick",this.editInteraction),this.$root.$on("deletePoiClick",this.confirmDeletePoi),this.$root.$on("cancelPoiClick",this.removeInteraction)},initializeMap:(r=Object(c.a)(regeneratorRuntime.mark(function e(){var t,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.view=new m.a({center:V.a.getStartCenter(),zoom:15,maxZoom:23}),this.layers=V.a.getLayers(),this.map=new f.a({interactions:Object(C.a)().extend([new F.a,new N.a({constrainResolution:!0})]),target:this.mapId,controls:V.a.getMapControls(),view:this.view,layers:this.layers.layerGroups}),this.map.on("singleclick",this.onMapClick,this),window.onresize=function(){setTimeout(function(){o.map.updateSize()},500)},e.next=7,z.a.request({endPoint:"floor/"});case 7:(t=e.sent)&&t.data&&t.data.results&&(this.floors=t.data.results,this.floors&&this.floors.length&&(this.intitialFloor=this.floors.filter(function(e){return e.short_name.toLowerCase()===T.a.defaultStartFloor.toLowerCase()})[0],this.activeFloorName=T.a.layerNamePrefix+this.intitialFloor.short_name.toLowerCase(),this.$emit("floorChange",{floor:this.intitialFloor,floors:this.floors,name:this.activeFloorName}),this.wmsLayerInfo=V.a.getWmsLayers(this.floors)),this.layers.layerGroups.push(this.wmsLayerInfo.layerGroup),this.layers.switchableLayers=this.wmsLayerInfo.layers,this.map.addLayer(this.wmsLayerInfo.layerGroup));case 9:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),onMapClick:function(e){var t=e.pixel,o=this.map.getFeaturesAtPixel(t),r=[];if(this.map.forEachFeatureAtPixel(t,function(e,t){r.push(e)}),o=r[0]){var n=o.getGeometry().getType().toString();if(("MultiPolygon"===n||"MultiPoint"===n)&&"MultiPoint"===n){this.activeFloorName=T.a.layerNamePrefix+this.activeFloor.short_name.toLowerCase();var c=!0;T.a.layerNamePrefix+o.getProperties().floor_name.toLowerCase()!==this.activeFloorName&&(c=!1),o.setStyle(M.a.setPoiStyleOnLayerSwitch("/images/selected.png",c)),this.clearPreviousSelection(),this.selectedPoi=o}}},clearPreviousSelection:function(){var e=!0;this.activeFloorName=T.a.layerNamePrefix+this.activeFloor.short_name.toLowerCase(),this.selectedPoi&&(T.a.layerNamePrefix+this.selectedPoi.getProperties().floor_name.toLowerCase()!==this.activeFloorName&&(e=!1),this.selectedPoi.setStyle(M.a.setPoiStyleOnLayerSwitch(this.selectedPoi.getProperties().icon,e)),this.selectedPoi=null,this.map.removeLayer(this.editingVectorLayer))},confirmDeletePoi:function(){this.selectedPoi&&this.selectedPoi.getId()?this.deleteConfirm=!0:this.$store.commit("SET_SNACKBAR","Please select the POI first to delete.")},onDeletePoiClick:function(){this.$root.$emit("deletePoi",this.selectedPoi),this.selectedPoi=null,this.deleteConfirm=!1,this.removeInteraction()},editInteraction:function(){if(this.selectedPoi){var e=this.selectedPoi.getGeometry().getCoordinates()[0];this.selectedPoi.setStyle(M.a.setPoiStyleOnLayerSwitch("",!0)),this.selectedPoi.setStyle(M.a.setPoiStyleOnLayerSwitch(null,!0));var t=new v.c({image:new P.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"/images/selected_pin.png"})});this.editMarker=new L.a(e);var o=new E.a(this.editMarker);this.editingVectorLayer=new h.a({zIndex:35,source:new y.a({features:[o]}),style:[t]}),this.map.addLayer(this.editingVectorLayer),this.translate=new x.a({features:new O.a([o])}),this.map.addInteraction(this.translate),this.translate.on("translateend",this.onTranslateEnd)}},addInteractions:function(){this.removeInteraction(),this.selectedPoi=null,this.activeFloorName&&this.selectedPoiCategory?(this.isAddPoiMode=!0,this.source=new y.a,this.vectorInteractionLayer=new h.a({source:this.source,zIndex:35,style:new v.c({fill:new w.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new _.a({color:"#ffcc33",width:2}),image:new P.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"/images/selected_pin.png"})})}),this.modify=new I.a({source:this.source}),this.map.addInteraction(this.modify),this.map.addLayer(this.vectorInteractionLayer),this.draw=new k.a({source:this.source,type:"Point"}),this.map.addInteraction(this.draw),this.snap=new S.a({source:this.source}),this.map.addInteraction(this.snap),this.draw.on("drawend",this.onDrawEnd),this.modify.on("modifyend",this.onModifyEnd),this.modify.on("modifystart",this.onModifyStart)):this.$store.commit("SET_SNACKBAR","Please select the POI category and Active floor to continue")},onTranslateEnd:function(e){this.$emit("editPoi",{feature:this.selectedPoi,coord:this.editMarker.getCoordinates()})},onModifyStart:function(e){this.currentEditingPoi={oldCoord:e.target.dragSegments_[0][0].feature.getGeometry().getCoordinates()}},onModifyEnd:function(e){this.currentEditingPoi&&(this.currentEditingPoi.newCoord=e.target.dragSegments_[0][0].feature.getGeometry().getCoordinates(),this.$emit("updatePoiCoord",this.currentEditingPoi))},removeInteraction:function(){this.isAddPoiMode=!1,this.map.removeInteraction(this.draw),this.map.removeInteraction(this.snap),this.map.removeInteraction(this.translate),this.vectorInteractionLayer&&this.map.removeLayer(this.vectorInteractionLayer),this.editingVectorLayer&&this.map.removeLayer(this.editingVectorLayer),this.draw&&this.draw.un("drawend",this.onDrawEnd),this.modify&&this.modify.un("modifyend",this.onModifyEnd),this.modify&&this.modify.un("modifystart",this.onModifyStart),this.translate&&this.translate.un("translateend"),this.clearPreviousSelection(),this.selectedPoi=null},onMapSwitchClick:function(){var e=this.layers.baseLayers;if(this.isSatelliteMap=!this.isSatelliteMap,this.isSatelliteMap)return e.ortho30cmBmapat.setVisible(!1),void e.greyBmapat.setVisible(!0);e.ortho30cmBmapat.setVisible(!0),e.greyBmapat.setVisible(!1)},onDrawEnd:function(e){if(this.isAddPoiMode){var t=e.feature.getGeometry().getCoordinates(),data={floor:1,name:this.selectedPoiCategory.name,description:"",enabled:!0,name_en:this.selectedPoiCategory.name_en,name_de:this.selectedPoiCategory.name_de,floor_num:this.activeFloor.floor_num,floor_name:this.activeFloor.short_name,category:this.selectedPoiCategory.id,geom:JSON.stringify({type:"MultiPoint",coordinates:[t],crs:{type:"name",properties:{name:"EPSG:3857"}}})};this.$emit("addnewPoi",data)}},onPoiLoad:function(e){var t=this,o=e.removedItems,r=e.newItems,n=e.oldItems;o&&o.length&&o.forEach(function(e){$.a.poiExist(e,t.map)&&$.a.removePoiById(e.id,t.map)}),n&&n.length&&n.forEach(function(e){$.a.setPoiVisibility(e,t.map)}),r&&r.length&&r.forEach(function(e){t.activeFloorName=T.a.layerNamePrefix+t.activeFloor.short_name.toLowerCase(),$.a.fetchPoi(e.id,t.map,t.activeFloorName).then(function(e){t.map.getLayers().forEach(function(t){99999===t.getProperties().id&&t.getLayers().push(e)})})})}}}),B=(o(533),o(32)),U=o(36),j=o.n(U),A=o(145),D=o(384),G=o(335),Y=o(535),X=o(323),component=Object(B.a)(R,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fill-height"},[o("div",{ref:e.map,staticClass:"fill-height fluid flat width='100%' style='border-radius: 0",attrs:{id:e.mapId}}),e._v(" "),o("div",{staticClass:"indrz-zoom-control",attrs:{id:"zoom-control"}}),e._v(" "),o("div",{attrs:{id:"id-map-switcher-widget"}},[o("v-btn",{staticClass:"pa-2",attrs:{id:"id-map-switcher",color:"rgba(0,60,136,0.5)","min-width":"95px",small:"",dark:""},on:{click:e.onMapSwitchClick}},[e._v("\n      "+e._s(e.isSatelliteMap?"Satellite":"Map")+"\n    ")])],1),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"350"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[o("v-card",[o("v-card-title",[e._v("Are you sure you want to delete?")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:e.onDeletePoiClick}},[e._v("\n          Yes\n        ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteConfirm=!1}}},[e._v("\n          Cancel\n        ")])],1)],1)],1)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"indrz-logo"},[t("a",{attrs:{href:"https://www.indrz.com",target:"_blank"}},[t("img",{attrs:{id:"indrz-logo",src:"/images/indrz-powered-by-90px.png",alt:"indrz logo"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tu-logo"},[t("a",{attrs:{href:"https://www.tuwien.at",target:"_blank"}},[t("img",{staticStyle:{width:"auto",height:"40px"},attrs:{id:"tu-logo",src:"/images/tu-logo.png",alt:"tulogo"}})])])}],!1,null,"01e9b512",null),H=component.exports;j()(component,{VBtn:A.a,VCard:D.a,VCardActions:G.a,VCardTitle:G.c,VDialog:Y.a,VSpacer:X.a});var W={name:"ActionButtons",data:function(){return{direction:"top",fab:!1,fling:!1,hover:!1,tabs:null,top:!1,right:!0,bottom:!0,left:!1,transition:"slide-y-reverse-transition"}},methods:{onAddPoiClick:function(){this.$root.$emit("addPoiClick")},onEditPoiClick:function(){this.$root.$emit("editPoiClick")},onDeletePoiClick:function(){this.$root.$emit("deletePoiClick")}}},J=(o(536),o(120)),K=o(629),Z=Object(B.a)(W,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"speed-btn-panel"},[o("v-speed-dial",{attrs:{top:e.top,bottom:e.bottom,right:e.right,left:e.left,direction:e.direction,"open-on-hover":e.hover,transition:e.transition},scopedSlots:e._u([{key:"activator",fn:function(){return[o("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?o("v-icon",[e._v("\n          mdi-close\n        ")]):o("v-icon",[e._v("\n          mdi-map-marker\n        ")])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e._v(" "),o("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onEditPoiClick(t)}}},[o("v-icon",[e._v("mdi-pencil")])],1),e._v(" "),o("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onAddPoiClick(t)}}},[o("v-icon",[e._v("mdi-plus")])],1),e._v(" "),o("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onDeletePoiClick(t)}}},[o("v-icon",[e._v("mdi-delete")])],1)],1)],1)},[],!1,null,"7bee4c01",null),Q=Z.exports;j()(Z,{VBtn:A.a,VIcon:J.a,VSpeedDial:K.a});var ee,te={name:"PoiManager",components:{PoiMap:H,ActionButtons:Q,FloorChanger:d.a,PointsOfInterest:l.a},data:function(){return{activeFloor:null,activeFloorName:"",selectedPoiCategory:null,floors:[],newPoiCollection:[],editPoi:null,initialPoiCatId:null}},mounted:function(){this.$root.$on("poiLoad",this.$refs.map.onPoiLoad),this.$root.$on("deletePoi",this.deletePoi)},methods:{setSelectedPoiCategory:function(e){this.selectedPoiCategory=e},onFloorClick:function(e){this.activeFloorName=e,this.activeFloor=this.$refs.floorChanger.getFloorByFloorName(e);var t=this.$refs.map,map=t.map,o=t.layers;V.a.activateLayer(this.activeFloorName,o.switchableLayers,map)},onMapFloorChange:function(e){var t=e.floor,o=e.floors,r=e.name;this.floors=o,this.activeFloor=t,this.$nextTick(function(){this.$refs.floorChanger.onFloorClick(t),this.activeFloorName=r})},onAddNewPoi:function(e){this.newPoiCollection.push(e)},onEditPoi:function(e){this.editPoi=e},onUpdatePoiCoord:function(e){var t=this.newPoiCollection.find(function(t){var o=JSON.parse(t.geom).coordinates[0];if(e.oldCoord[0]===o[0]&&e.oldCoord[1]===o[1])return t});t&&(t.geom=JSON.stringify({type:"MultiPoint",coordinates:[e.newCoord],crs:{type:"name",properties:{name:"EPSG:3857"}}}))},onSaveButtonClick:function(){var e=this;if(this.newPoiCollection.length){this.newPoiCollection.forEach(function(){var e=Object(c.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.postRequest({endPoint:"poi/",method:"POST",data:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var t=this.$refs.poiTree;t.forceReloadNode=!0,this.initialPoiCatId=this.newPoiCollection[0].category.toString(),t.loadDataToPoiTree(),this.$refs.map.currentEditingPoi=null}else if(this.editPoi){var o=this.editPoi.feature;o.getGeometry().setCoordinates([this.editPoi.coord]);var data={category:o.getProperties().category,geometry:{type:"MultiPoint",coordinates:o.getGeometry().getCoordinates()}};z.a.putRequest({endPoint:"poi/".concat(o.getId(),"/"),method:"PUT",data:data}).then(function(e){console.log(e)})}this.$root.$emit("cancelPoiClick"),this.$nextTick(function(){e.newPoiCollection.length&&e.$root.$emit("addPoiClick"),e.newPoiCollection=[],e.editPoi=null})},deletePoi:(ee=Object(c.a)(regeneratorRuntime.mark(function e(t){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.postRequest({endPoint:"poi/".concat(t.getId()),method:"DELETE",data:{}});case 2:(o=this.$refs.poiTree).forceReloadNode=!0,this.initialPoiCatId=t.getProperties().category.toString(),o.loadDataToPoiTree();case 6:case"end":return e.stop()}},e,this)})),function(e){return ee.apply(this,arguments)}),onCancelButtonClick:function(){this.newPoiCollection=[],this.editPoi=null,this.$root.$emit("cancelPoiClick")}}},oe=(o(540),Object(B.a)(te,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fill-height"},[o("poi-map",{ref:"map",attrs:{"selected-poi-category":e.selectedPoiCategory,"active-floor":e.activeFloor},on:{floorChange:e.onMapFloorChange,addnewPoi:e.onAddNewPoi,editPoi:e.onEditPoi,updatePoiCoord:e.onUpdatePoiCoord}}),e._v(" "),o("div",{staticClass:"poi"},[o("points-of-interest",{ref:"poiTree",attrs:{multi:!1,"initial-poi-cat-id":e.initialPoiCatId},on:{selectPoiCategory:e.setSelectedPoiCategory}})],1),e._v(" "),o("div",{staticClass:"save-btn-panel"},[o("v-btn",{attrs:{color:"primary",small:"",width:"70px",disabled:!e.newPoiCollection.length&&!e.editPoi},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onSaveButtonClick(t)}}},[e._v("\n      Save\n    ")]),e._v(" "),o("v-btn",{attrs:{color:"primary",small:"",width:"70px"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onCancelButtonClick(t)}}},[e._v("\n      Cancel\n    ")])],1),e._v(" "),o("floor-changer",{ref:"floorChanger",attrs:{floors:e.floors},on:{floorClick:e.onFloorClick}}),e._v(" "),o("action-buttons")],1)},[],!1,null,"d0fbef16",null)),ie=oe.exports;j()(oe,{VBtn:A.a});var re={layout:"admin",components:{PoiManager:ie,SnackBar:o(455).a}},ne=Object(B.a)(re,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fill-height"},[t("poi-manager"),this._v(" "),t("snack-bar")],1)},[],!1,null,"0842737e",null);t.default=ne.exports}}]);