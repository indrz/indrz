(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{304:function(e,t,o){var content=o(410);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("1569ab5c",content,!0,{sourceMap:!1})},312:function(e,t,o){var content=o(425);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("dfe11882",content,!0,{sourceMap:!1})},315:function(e,t,o){var content=o(445);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("0100a0c4",content,!0,{sourceMap:!1})},320:function(e,t,o){var content=o(478);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("b4774850",content,!0,{sourceMap:!1})},321:function(e,t,o){var content=o(485);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("15deb278",content,!0,{sourceMap:!1})},322:function(e,t,o){var content=o(487);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(31).default)("9f2aaf2a",content,!0,{sourceMap:!1})},409:function(e,t,o){"use strict";var r=o(304);o.n(r).a},410:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,'.ol-popup[data-v-11a5359b]{position:absolute;background-color:#fff;-webkit-filter:drop-shadow(0 1px 4px rgba(0,0,0,.2));filter:drop-shadow(0 1px 4px rgba(0,0,0,.2));padding:15px;border-radius:0;border:1px solid #ccc;bottom:12px;left:-50px;min-width:220px;z-index:1}.ol-popup[data-v-11a5359b]:after,.ol-popup[data-v-11a5359b]:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup[data-v-11a5359b]:after{border-top-color:#fff;border-width:10px;left:48px;margin-left:-10px}.ol-popup[data-v-11a5359b]:before{border-top-color:#ccc;border-width:11px;left:48px;margin-left:-11px}.ol-popup-closer[data-v-11a5359b]{text-decoration:none;position:absolute;top:2px;right:8px}.ol-popup-closer[data-v-11a5359b]:after{content:"X"}.indrz-popup p[data-v-11a5359b]{font-family:Arial,sans-serif;font-size:12px;letter-spacing:.1px;line-height:12px;color:#000;z-index:0}',""])},424:function(e,t,o){"use strict";var r=o(312);o.n(r).a},425:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,'.row[data-v-0e6aa7bd]{padding-left:15px}.container[data-v-0e6aa7bd],.container-fluid[data-v-0e6aa7bd]{padding-left:0}body[data-v-0e6aa7bd]{font-family:SignikaLight,Geneva,Helvetica,Arial;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.indrz-main-container[data-v-0e6aa7bd],body[data-v-0e6aa7bd]{position:absolute;top:0;bottom:0;right:0;left:0;padding:0;margin:0}.indrz-floor-changer-float[data-v-0e6aa7bd]{position:absolute;background-color:#00f;top:6em;font-size:12px!important;left:10px;z-index:1;margin:1!important;width:30px;margin-bottom:0;font-weight:700}.indrz-floor-changer-float a[data-v-0e6aa7bd]{text-decoration:none;padding-left:4px;padding-right:4px}.indrz-floorchanger[data-v-0e6aa7bd]{background-color:#4b45ff!important}#toolbox[data-v-0e6aa7bd]{position:absolute;top:98px;right:18px;padding:3px;border-radius:4px;color:#fff;background:hsla(0,0%,100%,.4);z-index:100}#layerswitcher[data-v-0e6aa7bd]{margin:0;padding:15px;border-radius:4px;background:rgba(0,60,136,.5);list-style-type:none}.indrz-logo[data-v-0e6aa7bd]{position:absolute;bottom:2%;left:50%;z-index:1001}.treeview .list-group-item[data-v-0e6aa7bd]{padding:1px!important}.list-group[data-v-0e6aa7bd]{margin-bottom:0}.list-group-item[data-v-0e6aa7bd]{display:block;padding:5px 1px!important;background-color:transparent;border:transparent;margin:0}.list-group-item.active[data-v-0e6aa7bd],.list-group-item.active[data-v-0e6aa7bd]:focus,.list-group-item.active[data-v-0e6aa7bd]:hover{z-index:2;color:#fff;background-color:#676767;border-color:#337ab7;font-weight:bolder}main li[data-v-0e6aa7bd]{font-size:14px;line-height:18px}.list-group-item[data-v-0e6aa7bd]:hover{background-color:#65b6f5}main a[data-v-0e6aa7bd]{color:#dadada;text-decoration:underline}.nav-pills>li.active>a[data-v-0e6aa7bd],.nav-pills>li.active>a[data-v-0e6aa7bd]:focus,.nav-pills>li.active>a[data-v-0e6aa7bd]:hover{color:#fff;background-color:#4c4c4c!important;line-height:5px!important;font-size:12px!important}.nav-pills>li>a[data-v-0e6aa7bd],.nav-pills>li>a[data-v-0e6aa7bd]:focus{color:#0a6aa1;line-height:5px!important;font-size:12px!important}.indrz-search[data-v-0e6aa7bd]{position:absolute;top:2%;left:40px;z-index:1002}.indrz-search-kiosk[data-v-0e6aa7bd]{position:absolute;top:.5em;left:6.7em;z-index:2000;width:25em}#poi-panel-body[data-v-0e6aa7bd]{padding:0}.indrz-kiosk-zoom-to-campus[data-v-0e6aa7bd]{left:4em}.olImageLoadError[data-v-0e6aa7bd]{display:none}body[data-v-0e6aa7bd]{padding-top:60px}.ol-attribution[data-v-0e6aa7bd]{max-width:calc(100% - 3em)}.ol-attribution[data-v-0e6aa7bd],.ol-control button[data-v-0e6aa7bd],.ol-scale-line-inner[data-v-0e6aa7bd]{font-family:Lucida Grande,Verdana,Geneva,Lucida,Arial,Helvetica,sans-serif}#tags[data-v-0e6aa7bd]{display:none}body[data-v-0e6aa7bd],h1[data-v-0e6aa7bd],h2[data-v-0e6aa7bd],h3[data-v-0e6aa7bd],h4[data-v-0e6aa7bd],li[data-v-0e6aa7bd],p[data-v-0e6aa7bd],td[data-v-0e6aa7bd],th[data-v-0e6aa7bd]{font-family:Quattrocento Sans}.navbar-inverse .navbar-inner[data-v-0e6aa7bd]{background:#1f6b75}.navbar-inverse .brand[data-v-0e6aa7bd]{color:#fff;padding:5px}.bs-example[data-v-0e6aa7bd]{font-family:sans-serif;position:relative;margin:100px}.popover-content[data-v-0e6aa7bd]{min-width:225px}.twitter-typeahead .tt-hint[data-v-0e6aa7bd],.twitter-typeahead .tt-query[data-v-0e6aa7bd]{margin-bottom:0}.tt-hint[data-v-0e6aa7bd]{display:block;width:100%;height:34px;padding:8px 12px;font-size:14px;line-height:1.428571429;color:#999;vertical-align:middle;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.tt-hint[data-v-0e6aa7bd],.tt-menu[data-v-0e6aa7bd]{background-color:#fff}.tt-menu[data-v-0e6aa7bd]{min-width:160px;margin-top:2px;padding:5px 0;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,.175);background-clip:padding-box}.tt-suggestion[data-v-0e6aa7bd]{display:block;padding:3px 20px;font-size:12px}.tt-suggestion[data-v-0e6aa7bd]:hover{color:#fff;background-color:#009ab8}.tt-suggestion.tt-is-under-cursor a[data-v-0e6aa7bd]{color:#fff}.tt-suggestion p[data-v-0e6aa7bd]{margin:0}#id-map-switcher-widget[data-v-0e6aa7bd]{position:absolute;right:5px;top:.5em}#id-map-switcher-widget button[data-v-0e6aa7bd]{width:110px;margin-right:5px}#popupBuilding[data-v-0e6aa7bd],#popupFloorNumber[data-v-0e6aa7bd],#popupRoomCat[data-v-0e6aa7bd],#popupRoomCode[data-v-0e6aa7bd]{padding-left:5px}#sharePoiCatPopup[data-v-0e6aa7bd]{background-color:#ff4344}.ol-popup[data-v-0e6aa7bd]{position:absolute;background-color:#fff;-webkit-filter:drop-shadow(0 1px 4px rgba(0,0,0,.2));filter:drop-shadow(0 1px 4px rgba(0,0,0,.2));padding:15px;border-radius:0;border:1px solid #ccc;bottom:12px;left:-50px;min-width:220px;z-index:1}.ol-popup[data-v-0e6aa7bd]:after,.ol-popup[data-v-0e6aa7bd]:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup[data-v-0e6aa7bd]:after{border-top-color:#fff;border-width:10px;left:48px;margin-left:-10px}.ol-popup[data-v-0e6aa7bd]:before{border-top-color:#ccc;border-width:11px;left:48px;margin-left:-11px}.ol-popup-closer[data-v-0e6aa7bd]{text-decoration:none;position:absolute;top:2px;right:8px}.ol-popup-closer[data-v-0e6aa7bd]:after{content:"X"}.ol-zoom[data-v-0e6aa7bd]{top:.2em;left:.5em}.ol-zoom[data-v-0e6aa7bd],.ol-zoom .ol-zoom-in[data-v-0e6aa7bd],.ol-zoom .ol-zoom-out[data-v-0e6aa7bd]{border-radius:0}.ol-control button[data-v-0e6aa7bd]:focus,.ol-control button[data-v-0e6aa7bd]:hover{text-decoration:none;background-color:rgba(19,19,19,.7)}.ol-control button[data-v-0e6aa7bd]{display:block;margin:.17em 1px 2px;padding:0;color:#fff;font-size:1.4em;font-weight:700;text-decoration:none;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:#0a6aa1;border:none;border-radius:0}.twitter-typeahead[data-v-0e6aa7bd]{float:left;width:100%}.navbar[data-v-0e6aa7bd]{margin-bottom:0}#map[data-v-0e6aa7bd]{position:relative}@media (max-width:990px){#id-map-switcher-widget[data-v-0e6aa7bd]{position:absolute;top:.5em;right:6em;left:auto;bottom:auto}.indrz-floor-changer-float[data-v-0e6aa7bd]{font-size:12px;position:absolute;top:6em;width:65px;background-color:#d81d98}#id-map-switcher-widget button[data-v-0e6aa7bd]{width:auto;height:2.85em}#map-search-form[data-v-0e6aa7bd]{display:none}#map-search-form.collapse.in[data-v-0e6aa7bd]{display:block}.navbar-toggle[data-v-0e6aa7bd]{display:block;margin-left:2em}.navbar-header[data-v-0e6aa7bd],.navbar-toggle[data-v-0e6aa7bd]{float:left!important}}@media (min-width:990px){#map-search-form[data-v-0e6aa7bd]{display:block!important}.indrz-floor-changer-float[data-v-0e6aa7bd]{position:absolute;background-color:#0a6aa1;top:6em;font-size:12px!important;right:10px;z-index:1;margin:1!important;width:28px;margin-bottom:0;font-weight:700;text-align:center}.indrz-floor-changer-float a[data-v-0e6aa7bd]{text-decoration:none;padding-left:4px}.navbar-toggle[data-v-0e6aa7bd]{float:left!important;display:none}}.navbar-toggle[data-v-0e6aa7bd]{float:left;display:block;margin-left:2em}.indrz-logo[data-v-0e6aa7bd]{width:100%;text-align:center;left:auto}h3[data-v-0e6aa7bd]{display:block;font-size:1.17em;-webkit-margin-before:1em;-webkit-margin-after:1em;-webkit-margin-start:0;-webkit-margin-end:0;font-weight:700;color:#000!important}.jstree-anchor[data-v-0e6aa7bd]{font-size:14px!important}#searchTools[data-v-0e6aa7bd]{display:none}.indrz-search-tools[data-v-0e6aa7bd]{padding-bottom:15px!important;padding-top:5px}.indrz-popup p[data-v-0e6aa7bd]{font-family:Arial,sans-serif;font-size:12px;letter-spacing:.1px;line-height:12px;color:#000;z-index:0}#popup-links a[data-v-0e6aa7bd]{margin-bottom:5px}.indrz-toolbar[data-v-0e6aa7bd]{position:absolute;top:.5em;left:3.9em}.indrz-search-box[data-v-0e6aa7bd]{margin-top:10px}#search-res[data-v-0e6aa7bd]{max-height:250px;overflow-y:scroll}.searchbox-wu[data-v-0e6aa7bd]{padding-left:0;padding-right:12px}.fa[data-v-0e6aa7bd]{display:inline-block;font:normal normal normal 10px/1 FontAwesome;font-size:14px;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding-left:3px}.jstree-icon[data-v-0e6aa7bd],.jstree-icon[data-v-0e6aa7bd]:empty{vertical-align:middle}.indrz-modal-share h4[data-v-0e6aa7bd],.indrz-modal-share p[data-v-0e6aa7bd]{font-size:14px!important;text-align:left!important}#textAreaShareMap[data-v-0e6aa7bd]{min-height:80px;width:100%}#textAreaShareSearch[data-v-0e6aa7bd]{min-height:50px;width:100%}#textAreaShareRoute[data-v-0e6aa7bd]{min-height:80px;width:100%}@media (max-width:650px){#id-map-switcher-widget[data-v-0e6aa7bd]{position:absolute;top:.5em;right:.7em;left:auto;bottom:auto}.indrz-floor-changer-float[data-v-0e6aa7bd]{position:absolute;top:6em;width:60px;font-size:12px}.sm-floor-changer[data-v-0e6aa7bd]{background-color:#000;color:#fff}#poi-accordian[data-v-0e6aa7bd]{display:none}}color:#000;#popupTable td[data-v-0e6aa7bd]{padding-left:5px}.indrz-context-menu[data-v-0e6aa7bd]{display:none;position:absolute;z-index:10;padding:12px 0;width:240px;background-color:#fff;border:1px solid #dfdfdf;box-shadow:1px 1px 2px #cfcfcf}.indrz-context-menu--active[data-v-0e6aa7bd]{display:block}.indrz-context-menu__items[data-v-0e6aa7bd]{list-style:none;margin:0;padding:0}.indrz-context-menu__item[data-v-0e6aa7bd]{display:block;margin-bottom:4px}.indrz-context-menu__item[data-v-0e6aa7bd]:last-child{margin-bottom:0}.indrz-context-menu__link[data-v-0e6aa7bd]{display:block;padding:4px 12px;color:#06a;text-decoration:none}.btn-primary[data-v-0e6aa7bd],.indrz-context-menu__link[data-v-0e6aa7bd]:hover{color:#fff;background-color:#06a}.btn-primary[data-v-0e6aa7bd]{border-color:#8293a4;border-radius:0!important;border:0!important}',""])},444:function(e,t,o){"use strict";var r=o(315);o.n(r).a},445:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,".indrz-zoom-control[data-v-74d6799e]{right:50px!important;bottom:100px!important;position:absolute}#id-map-switcher-widget[data-v-74d6799e]{position:absolute;right:45px!important;bottom:37px!important}",""])},476:function(e){e.exports=JSON.parse('[{"name":"Access","children":[{"name":"Parking","icon":"parking","children":[{"name":"Bike","icon":"bike"},{"name":"Bike Covered","icon":"motorbike"},{"name":"Delivery","icon":"cart"}]},{"name":"Public Transport","icon":"bus","children":[{"name":"Bus","icon":"bus"}]},{"name":"Entrance","icon":"login"},{"name":"Info Point","icon":"information"}]},{"name":"Education","children":[{"name":"Library","icon":"library-books","children":[{"name":"Information","icon":"information"}]},{"name":"Front Office","icon":"account"},{"name":"Computer Room","icon":"laptop-windows"}]},{"name":"Facilities","children":[{"name":"Food","icon":"food","children":[{"name":"Restaurant","icon":"silverware-variant"},{"name":"Vending Machine","icon":"tablet-ipad"},{"name":"Cafe","icon":"coffee"}]},{"name":"Toilet","icon":"human-male-female","children":[{"name":"Mens WC","icon":"gender-male"},{"name":"Womens WC","icon":"gender-female"},{"name":"Barrierfree WC","icon":"wheelchair-accessibility"},{"name":"Baby Change Room","icon":"baby"},{"name":"Sport","icon":"football"}]}]},{"name":"Public Infrastructure","children":[{"name":"Copy Machines","icon":"printer"},{"name":"Locker","icon":"lock"},{"name":"Bank Machines","icon":"currency-usd"}]},{"name":"Safety & Security","children":[{"name":"Meeting Point","icon":"square-inc"}]}]')},477:function(e,t,o){"use strict";var r=o(320);o.n(r).a},478:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,".poi[data-v-2873a204]{font-size:.875rem}",""])},484:function(e,t,o){"use strict";var r=o(321);o.n(r).a},485:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,".floor-changer[data-v-5d67741a]{position:absolute;right:10px;top:70px;overflow-y:auto}",""])},486:function(e,t,o){"use strict";var r=o(322);o.n(r).a},487:function(e,t,o){(e.exports=o(30)(!1)).push([e.i,"header[data-v-7a1e41f8]{position:absolute;z-index:6}nav[data-v-7a1e41f8]{z-index:7}",""])},496:function(e,t,o){"use strict";o.r(t);o(40);var r=o(6),n=(o(70),o(71),o(3),o(135),o(20),o(97)),l=o.n(n),c=o(397),d=o(500),m=o(497),f=o(380),h=o(379),v=o(314),y=o(286),x=o(324),w=o(323),_=o(215),k=o(398),C=o.n(k),P=(o(253),o(45),o(406)),I=o(514),S=o(407),L=o(352),z=o(404),R=o(499),O=o(224),F=o(501),V=o(498),T=o(337),M=o(350),G=o(299),$=o(343),N=o(381),j=o(271),B=o(387),E={baseApiUrl:"https://tu.indrz.com/api/v1/",defaultCenterXY:[1822252.75,6139984.7],baseWmsUrl:"https://www.indrz.com/geoserver/wms",searchUrl:"https://tu.indrz.com/api/v1/search",token:"Token 42519ebe7bada4d7a151c76832b94614ea5b198d",layerNamePrefix:"floor_",geoServerLayerPrefix:"indrztu:",defaultStartFloor:"eg"},A=window.location.href,U=function(e,t){var o="",r="";if(e.hasOwnProperty("room_code")&&e.room_code&&(r=e.room_code,o=e.room_code),e.hasOwnProperty("name")&&e.name)return o=e.name;if(e.hasOwnProperty("name_de")&&e.name_de)return o="de"===t?e.name_de:e.name;if(e.hasOwnProperty("short_name")){if(e.short_name)return o=e.short_name;if(r)return o=r}if(e.hasOwnProperty("label")){if(e.label)return o=e.label;if(r)return o=r}if(e.hasOwnProperty("key")){if(e.key)return o=e.key;if(r)return o=r}if(e.hasOwnProperty("campus_name")){if(e.campus_name)return o=e.campus_name;if(r)return o=r}return e.hasOwnProperty("room_external_id")&&e.room_external_id&&!o?o=e.room_external_id:e.room_code?o=e.room_code:o},H=function(p){if(p.hasOwnProperty("roomcode")){if(p.roomcode)return p.roomcode.split(".")[0]}else if(p.hasOwnProperty("building_name")&&(null!==p.building_name||""!==p.building_name||void 0!==p.building_name))return p.building_name;return""},D=function(e,t,o){"popupHomepage"===o&&(t='<a target="_blank" href="'+t+'">'+t+"</a>");var r=document.getElementById("popupTable").insertRow(0),n=r.insertCell(0),l=r.insertCell(1);n.innerHTML=e,l.innerHTML=t,n.setAttribute("class","no-wrap"),l.setAttribute("id",o)},W=function(e,map,t,o,r,n){var l=map.getView().calculateExtent(map.getSize()),c=map.getView().getZoom(),d=map.getView().getCenter(),m=d[0],f=d[1],h="/?campus=1&centerx="+m+"&centery="+f+"&zlevel="+c+"&floor="+n,data={};return"route"===e?h=o.routeUrl?o.routeUrl:"noid"!==o.startPoiId&&"noid"!==o.endPoiId||"noid"!==t.poiId?o.routeUrl:("undefined"===t.poiId&&""===t.poiId&&t.poiId,"/?campus=1&startstr="+o.startName+"&endstr="+o.endName):"search"===e?(t.hasOwnProperty("external_id")&&(h=t.external_id===t.name?"/?campus=1&q="+t.external_id:"/?campus=1&q="+t.name),h=r.searchText?"/?campus=1&q="+r.searchText:"/?campus=1&q="+t.name):h="map"===e?"/?campus=1&centerx="+m+"&centery="+f+"&zlevel="+c+"&floor="+n:"bookId"===e?A+o.routeUrl:"poiCatId"===e?A+t.poiCatShareUrl:"wmsInfo"===e?A+"?campus=1&q="+t.wmsInfo:location.href,data.extent=l,data.zoom=c,history.pushState(data,"live_url_update",h),location.href},X={closeIndrzPopup:function(e,t){for(var o in e.setPosition(void 0),t)t[o]=null;return e.setPosition(void 0),t.poiId="noid",t.poiCatId="noid",t.bookId=!1,t.bookCoords=!1,t.name=!1,!1},openIndrzPopup:function(e,t,o,r,n,l,c,d,m,f,h,v,y){var x=d.split(E.layerNamePrefix)[1].toUpperCase(),w=document.getElementById("popup-content");for(var _ in e)e[_]=null;v=null!=v?v:-1,y=void 0!==y?y:[0,0],f.hasOwnProperty("poiId")&&(e.src="poi",e.poiId=f.poiId),f.hasOwnProperty("fk_poi_category")&&(e.src="poi",e.poiCatId=f.fk_poi_category.id),f.hasOwnProperty("spaceid")&&(e.spaceid=f.spaceid),f.hasOwnProperty("homepage")&&f.homepage&&f.homepage,f.hasOwnProperty("src")&&f.src&&(e.src=f.src),f.hasOwnProperty("space_type_id")&&(f.hasOwnProperty("src")&&(f.src?e.src=f.src:e.src="wms"),f.hasOwnProperty("id")&&(e.spaceid=f.id),f.hasOwnProperty("room_external_id")&&f.room_external_id&&(e.external_id=f.room_external_id)),f.hasOwnProperty("room_code")&&(e.wmsInfo=f.room_code,f.roomcode=f.room_code),f.hasOwnProperty("poi_id")?(f.poi_id,e.poiId=f.poi_id,f.hasOwnProperty("fk_poi_category")&&(e.poiCatId=f.fk_poi_category.id,e.poiCatName="de"===r?f.fk_poi_category.cat_name_de:f.fk_poi_category.cat_name_en,e.poiCatShareUrl=A+"?poi-cat-id="+e.poiCatId)):-1!==v&&"noid"===e.poiId&&"string"!=typeof v&&v.getId()&&(e.poiId=v.getId(),e.poiIdPopup=v.getId(),v.get("fk_poi_category")&&(e.poiCatId=v.get("fk_poi_category").id,e.poiCatName="de"===r?v.get("fk_poi_category").cat_name_de:v.get("fk_poi_category").cat_name_en,e.poiCatShareUrl=A+"?poi-cat-id="+e.poiCatId)),"noid"!==e.poiId&&(e.poiCatShareUrl="poi-cat-id="+e.poiCatId),n=(n=h)||""!==n?h:f.centerGeometry.coordinates;var k,C=H(f),P=null,I=null;f.hasOwnProperty("category_de")&&f.category_de&&(I="de"===r?f.category_de:f.category_en),f.hasOwnProperty("room_description")?f.name=f.room_description:f.hasOwnProperty("short_name")&&(f.name=f.short_name),f.hasOwnProperty("room_code")&&(f.roomcode=f.room_code),k=U(f,r),!0===f.hasOwnProperty("centroid")&&f.centroid,P=(f.label,f.roomcode);w.innerHTML='<h4 style="user-select: text;">'+k+"</h4>",w.innerHTML+="<div><p>",w.innerHTML+='<table id="popupTable" style="user-select: text;"></table>',f.hasOwnProperty("campus_name")||(void 0!==f.building_name&&""!==f.building_name&&D("Building: ",C,"popupBuilding"),f.hasOwnProperty("shelfID")&&D("Building: ",f.building,"popupBuilding"),P&&D("Room Number: ",P,"popupRoomCode"),I&&D("Category: ",I,"popupRoomCat"),f.room_external_id&&D("Room Code",f.room_external_id,"popupSpaceAks"),D("Floor Name: ",x,"popupFloorNumber")),e.roomcode?e.roomcode:P||e.name&&e.name,w.innerHTML+="</p></div>",e.name=k,e.coords=n,e.floor=d,e.roomcode=P,m.setPosition(h),m.setOffset(y)},getTitle:U,getBuildingLetter:H,addPoiTableRow:D,getRoomInfo:function(e,t){var o;return t.switchableLayers.forEach(function(element){e===E.layerNamePrefix+element.getProperties().floorName&&(o=element.getSource())}),o},handleShareClick:function(map,e,t,o,r){var param="";return e.bookId?param="bookId":o.searchText?param="search":e.poiCatId?param="poiCatId":"wms"===e.src&&(param="wmsInfo"),W(param,map,e,t,o,r)},updateUrl:W},J=E.baseApiUrl,Y={request:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l()({url:"".concat(t.url||J).concat(t.endPoint||""),method:t.method||"GET",headers:{Authorization:E.token,"Content-Type":"application/json"}});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},Z=function(e,t,o,r){var n=Object(O.d)("EPSG:3857"),l="{Layer}/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}"+t,c=["https://maps1.wien.gv.at/basemap/"+l,"https://maps2.wien.gv.at/basemap/"+l,"https://maps3.wien.gv.at/basemap/"+l,"https://maps4.wien.gv.at/basemap/"+l],d=new T.b({origin:[-20037508.3428,20037508.3428],extent:[977650,5838030,1913530,6281290],resolutions:[156543.03392811998,78271.51696419998,39135.758481959994,19567.879241008,9783.939620504,4891.969810252,2445.984905126,1222.9924525644,611.4962262807999,305.74811314039994,152.87405657047998,76.43702828523999,38.21851414248,19.109257071295996,9.554628535647998,4.777314267823999,2.3886571339119995,1.1943285669559998,.5971642834779999,.29858214174039993,.14929107086936],matrixIds:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]}),m=new V.a({tilePixelRatio:1,projection:n,layer:e,style:"normal",matrixSet:"google3857",urls:c,crossOrigin:"anonymous",requestEncoding:"REST",tileGrid:d,attributions:'© <a href="https://www.basemap.at/">Basemap.at       </a>'});return new F.a({name:e,source:m,minResolution:.298582141738,visible:o,type:"background"})},Q=function(e){e.forEach(function(e){return e.setVisible(!1)})},K=function(e,t){if(t.length>0){var o=t.find(function(t){return t.getProperties().name.toLowerCase()===e.toLowerCase()});o&&o.setVisible(!0)}},ee=function(e,t){var o=e?e.getProperties().floorName:"",r=t.switchableLayers.find(function(e){return e.getProperties().floorName===o});r&&le(r.getProperties().name,t.switchableLayers)},te=function(e,t,o,r,n,l,c){c=c||0;var d="",m="",f="";l=l||0;return 0===l?m="searchResListItem_"+e:(m="searchResListItem_"+e+"-"+l,d='<img src="'+c+'" alt="POI" style="height: 25px; padding-right:5px;">'),f='<a href="#" onclick="showRes('+t+","+o+","+l+')" id="'+m+'" class="list-group-item indrz-search-res" >'+r+' <span class="badge">Floor '+n+"</span> </a>",""!==c&&(f='<a href="#" onclick="showRes('+t+","+o+","+l+')" id="'+m+'" class="list-group-item indrz-search-res" >  '+d+r+' <span class="badge">Floor '+n+"</span> </a>"),f},ae=new N.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"/static/homepage/img/other.png"}),oe={Point:[new G.b({image:ae})],LineString:[new G.b({stroke:new $.a({color:"#68ff5b",width:1})})],MultiLineString:[new G.b({stroke:new $.a({color:"#68ff5b",width:1})})],MultiPoint:[new G.b({image:ae})],MultiPolygon:[new G.b({stroke:new $.a({color:"#4ff0ff",width:3}),fill:new j.a({color:"rgba(38, 215, 255, 0.4)"})})],Polygon:[new G.b({stroke:new $.a({color:"#4ff0ff",width:3}),fill:new j.a({color:"rgba(38, 215, 255, 0.4)"})})],GeometryCollection:[new G.b({stroke:new $.a({color:"magenta",width:2}),fill:new j.a({color:"magenta"}),image:new B.a({radius:10,fill:null,stroke:new $.a({color:"magenta"})})})],Circle:[new G.b({stroke:new $.a({color:"red",width:2}),fill:new j.a({color:"rgba(255,0,0,0.2)"})})]},re=function(e,t){var o=e.getGeometry().getType();if("MultiPolygon"===o)return oe[e.getGeometry().getType()];if("MultiPoint"===o){var r=new N.a({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:e.get("icon"),opacity:1});return new G.b({image:r})}},ne=function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(E.searchUrl,"/").concat(t),e.next=3,Y.request({url:o});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(map,t,o,r,n,l,c,d,m,f,h,v,y,k,C,P){var I,S,L,z,R,O,F,V;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&map.removeLayer(r),I=new x.a,S={},P){e.next=9;break}return e.next=6,ne(l);case 6:S=e.sent,e.next=10;break;case 9:S=P;case 10:return L=new w.a,z=L.readFeatures(S,{featureProjection:"EPSG:4326"}),I.addFeatures(z),I.forEachFeature(function(e){var t=e.get("name"),r=e.getGeometry().getExtent(),n=Object(_.x)(r),c=l,d=c=l===t?l:t,m=e.get("floor_name")?e.get("floor_name").toLowerCase():"",f=e.get("category_en"),h=e.get("roomcode"),v="";v=c!==h?" ("+h+")":"";var y="",x="";e.getProperties().hasOwnProperty("poi_id")?(y=e.get("poi_id"),x=e.get("icon"),o.poiId=e.get("poi_id"),o.src=e.get("src")):(o.poiId="noid",o.src=e.get("src"));var w='"'+c+'"',k="";if(""!==f&&void 0!==f)k=te(c,w,n,d+" ("+f+")",m,y,x);else if(""!==h&&void 0!==h){k=te(c,w,n,d+v,m,y,x)}else{k=te(c,w,n,d,m,y,x)}console.log(k)}),R=Object(_.x)(I.getExtent()),1===z.length?(X.openIndrzPopup(o,d,m,f,h,v,y,k,C,z[0].getProperties(),R,z[0]),se(map.getView(),R,c),O=z[0].getProperties().floor_name?z[0].getProperties().floor_name.toLowerCase():"",F=t.switchableLayers.find(function(e){return e.getProperties().floorName===O}),ee(F,t)):0===z.length?("<p href='#' class='list - group - item indrz - search - res'> Sorry nothing found</p>",console.log("<p href='#' class='list - group - item indrz - search - res'> Sorry nothing found</p>")):(V=I.getExtent(),map.getView().fit(V),map.getView().setZoom(c)),r=new M.a({source:I,style:re,title:"SearchLayer",name:"SearchLayer",zIndex:999}),map.getLayers().push(r),window.location.href="#map",e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}));return function(t,o,r,n,l,c,d,m,f,h,v,y,x,w,_,k){return e.apply(this,arguments)}}(),se=function(view,e,t){view.animate({center:e,duration:2e3,zoom:t})},le=function(e,t){Q(t),K(e,t)},ce={getStartCenter:function(){return E.defaultCenterXY},getMapControls:function(){return[new P.a({collapsible:!1}),new I.a,new S.a({target:"zoom-control"})]},getWmsLayers:function(e){var t=[];e.forEach(function(e,o){var r=e.short_name.toLowerCase(),n=E.layerNamePrefix+r,l=function(e,t,o,r,n){return new z.a({source:new R.a({url:E.baseWmsUrl,params:{LAYERS:t,TILED:!0},serverType:"geoserver",crossOrigin:""}),visible:r,name:e,floorNumber:o,floorName:e.split(E.layerNamePrefix)[1],type:"floor",zIndex:n,crossOrigin:"anonymous"})}(n,E.geoServerLayerPrefix+n,e.floor_num,0===o,3);t.push(l)});var o=new L.a({layers:t,name:"wms floor maps"});return{layers:t,layerGroup:o}},getLayers:function(){var e=Z("bmapgrau",".png",!0),t=Z("bmaporthofoto30cm",".jpg",!1);return{baseLayers:{ortho30cmBmapat:t,greyBmapat:e},switchableLayers:[],layerGroups:[new L.a({layers:[e,t],name:"background maps"}),new L.a({layers:[],id:99999,name:"poi group"}),new L.a({layers:[],id:900,name:"campus locations"})]}},hideLayers:Q,setLayerVisible:K,activateFloor:ee,activateLayer:le,searchIndrz:ie},pe=o(274),de=o(301),ue=o(345),me=o(408),fe=function(map,e,t,o,r){var n=E.baseApiUrl+"directions/",l="",c="",d="",m="";"coords"===r?d=n+e+"&"+t+"&"+o+"/?format=json":"string"===r?d=n+"startstr="+e+"&endstr="+t+"&type="+o+"/?format=json":"poiToCoords"===r?d=n+"poi-id="+e+"&xyz="+t+"&reversed="+!1+"/?format=json":"spaceIdToPoiId"===r?d=n+"space-id="+e+"&poi-id="+t+"&type="+o+"/?format=json":"spaceIdToSpaceId"===r&&(d=n+"startid="+e+"&endid="+t+"&type="+o+"/?format=json");var source=new x.a;Y.request({url:d}).then(function(n){n=n.data;var d=(new w.a).readFeatures(n,{featureProjection:"EPSG:4326"}),f=JSON.stringify(n),h=JSON.parse(f);source.addFeatures(d),h.route_info.mid_name,he(map,d,h.route_info),"coords"===r?(l=h.route_info.start_name,c=h.route_info.end_name):"spaceIdToSpaceId"===r&&(l=h.route_info.start_name,c=h.route_info.end_name,m="/?campus=1&start-spaceid="+e+"&end-spaceid="+t+"&type="+o);var v=0;void 0!==d[0]&&(v=d[0].getProperties().floor),console.log(l),console.log(c),console.log(v);var y=source.getExtent();return map.getView().fit(y),m});var f=new M.a({source:source,style:function(e,t){},title:"RouteFromSearch",name:"RouteFromSearch",visible:!0,layer_id:20090,zIndex:4});map.getLayers().push(f)},he=function(map,e,t){var o=[],r=[],n=[],l=-99,c=-1,d=e.length,m=0;if(0!==d){for(var i=0;i<d;i++){var f=e[i].getProperties().floor;l!==f&&(n.push(f),l=f,r[++c]||(r[c]=0)),r[c]+=e[i].getGeometry().getLength()}c=0;for(var h=0;h<d;h++){var v=e[h].getProperties().floor;if(n[c]===v&&(m+=e[h].getGeometry().getLength()),n[c]===v&&r[c]/2<m){var y=e[h].getGeometry().getExtent(),w=Object(_.x)(y),k=new pe.a(e[h].getGeometry().getClosestPoint(w)),C=new ue.a({geometry:k}),P=new G.b({image:new N.a({src:"/images/route/route_floor_"+v+".png"})});C.setStyle(P),o.push(C),c++,m=0}}var I=!1;if(t)if(t.hasOwnProperty("route_markers"))for(var S=t.route_markers,L="",z=0;z<S.length;z++){if("mid"in S[z].properties){I=!0,"MultiPoint"===S[z].geometry.type?L=new de.a(S[z].geometry.coordinates):"Point"===S[z].geometry.type&&(L=new pe.a(S[z].geometry.coordinates));var R=new ue.a({geometry:L});R.setStyle([ge,ve]),o.push(R)}if("start"in S[z].properties){var O=void 0;"MultiPoint"===S[z].geometry.type&&(O=new de.a(S[z].geometry.coordinates)),"Point"===S[z].geometry.type&&(O=new pe.a(S[z].geometry.coordinates));var F=new ue.a({geometry:O});F.setStyle([ge,ve]),o.push(F)}if("end"in S[z].properties){var V=void 0;"MultiPoint"===S[z].geometry.type&&(V=new de.a(S[z].geometry.coordinates)),"Point"===S[z].geometry.type&&(V=new pe.a(S[z].geometry.coordinates));var T=new ue.a({geometry:V});T.setGeometry(V),o.push(T),!0===I?T.setStyle(be):T.setStyle([ge,ve])}}else{var $=new pe.a(e[0].getGeometry().getFirstCoordinate()),j=new pe.a(e[e.length-1].getGeometry().getLastCoordinate()),B=new ue.a({geometry:$}),E=new ue.a({geometry:j});B.setStyle([ge,ve]),E.setGeometry(j),E.setStyle([ge,ve]),o.push(B),o.push(E)}var A=new M.a({source:new x.a({features:o}),title:"RouteMarkers",name:"RouteMarkers",visible:!0,layer_id:20020,zIndex:6});map.getLayers().push(A)}},be=new G.b({image:new N.a({src:"/static/homepage/img/route_marker_C.png",anchor:[.5,1]}),zIndex:6}),ge=new G.b({text:new me.a({text:"",scale:2,font:"normal 18px FontAwesome",offsety:-30,offsetx:-10,fill:new j.a({color:"red"})})}),ve=new G.b({text:new me.a({text:"",scale:1,font:"normal 18px FontAwesome",offsety:-30,offsetx:-10,fill:new j.a({color:"black"})})}),ye=function(map,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t="",o=e.from,r=e.to;return o.properties.space_id&&r.properties.space_id?t=fe(map,o.properties.space_id,r.properties.space_id,"0","spaceIdToSpaceId"):o.properties.poi_id&&r.properties.space_id?t=fe(map,o.properties.poi_id,r.properties.space_id,"0","spaceIdToPoiId"):o.properties.poi_id&&r.properties.poi_id,t},xe={name:"InfoOverlay",methods:{onPopupCloseClick:function(){this.$emit("closeClick")},onShareButtonClick:function(){this.$emit("shareClick")}}},we=(o(409),o(39)),_e=o(53),ke=o.n(_e),Ce=o(411),Pe=o(359),Ie=o(515),component=Object(we.a)(xe,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ol-popup indrz-popup",attrs:{id:"indrz-popup",title:"indrz info"}},[o("a",{staticClass:"ol-popup-closer",attrs:{id:"popup-closer",href:"#"},on:{click:function(t){return t.stopPropagation(),e.onPopupCloseClick(t)}}}),e._v(" "),o("div",{attrs:{id:"popup-content"}}),e._v(" "),o("div",{attrs:{id:"popup-links"}},[o("v-btn",{attrs:{text:"",color:"primary",small:""}},[o("v-icon",{attrs:{left:""}},[e._v("\n        mdi-map-marker\n      ")]),e._v(" Route from here\n    ")],1),e._v(" "),o("v-btn",{attrs:{text:"",color:"primary",small:""}},[o("v-icon",{attrs:{left:""}},[e._v("\n        mdi-map-marker\n      ")]),e._v(" Route to here\n    ")],1),e._v(" "),o("br"),e._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("v-btn",e._g({attrs:{icon:"",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.onShareButtonClick(t)}}},r),[o("v-icon",[e._v("mdi-share-variant")])],1)]}}])},[e._v(" "),o("span",[e._v("Share")])])],1)])},[],!1,null,"11a5359b",null),Se=component.exports;ke()(component,{VBtn:Ce.a,VIcon:Pe.a,VTooltip:Ie.a});o(355);var Le={name:"ShareOverlay",data:function(){return{dialog:!1,link:"",copyConfirmation:""}},watch:{dialog:function(){this.copyConfirmation=""}},methods:{show:function(){this.dialog=!0},close:function(){this.dialog=!1},setShareLink:function(link){this.link=link},onCopyButtonClick:function(){var e=this.$refs.linkField.$el.querySelector("input");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),this.copyConfirmation="Url successfully copied in to clipboard!"}}},ze=(o(424),o(362)),Re=o(260),Oe=o(516),Fe=o(214),Ve=o(517),Te=o(518),Me=o(383),Ge=Object(we.a)(Le,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[e._v("Share search result")])]),e._v(" "),o("v-card-text",[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[o("v-text-field",{ref:"linkField",attrs:{value:e.link}})],1)],1),e._v(" "),o("v-row",[o("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[e._v("\n            "+e._s(e.copyConfirmation)+"\n          ")])],1)],1)],1),e._v(" "),o("v-card-actions",[o("div",{staticClass:"flex-grow-1"}),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",dark:""},on:{click:e.onCopyButtonClick}},[o("v-icon",{attrs:{dark:""}},[e._v("\n          mdi-content-copy\n        ")]),e._v("\n        Copy\n      ")],1),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n        Close\n      ")])],1)],1)],1)},[],!1,null,"0e6aa7bd",null),$e=Ge.exports;ke()(Ge,{VBtn:Ce.a,VCard:ze.a,VCardActions:Re.a,VCardText:Re.b,VCardTitle:Re.c,VCol:Oe.a,VContainer:Fe.a,VDialog:Ve.a,VIcon:Pe.a,VRow:Te.a,VTextField:Me.a});o(442);var Ne={components:{InfoOverlay:Se,ShareOverlay:$e},data:function(){return{mapId:"mapContainer",map:null,view:null,isSatelliteMap:!0,layers:[],popup:null,activeFloorName:"",initialFloor:{},globalPopupInfo:{},globalSearchInfo:{},globalRouteInfo:{},objCenterCoords:"",popUpHomePage:"",currentPOIID:0,currentLocale:"en",routeToValTemp:"",routeFromValTemp:"",hostUrl:window.location.href}},mounted:function(){var e=this;this.view=new f.a({center:ce.getStartCenter(),zoom:17,maxZoom:23}),this.layers=ce.getLayers(),this.map=new m.a({interactions:Object(h.a)().extend([new v.a,new y.a({constrainResolution:!0})]),target:this.mapId,controls:ce.getMapControls(),view:this.view,layers:this.layers.layerGroups}),this.popup=new d.a({element:document.getElementById("indrz-popup"),autoPan:!0,autoPanAnimation:{duration:250},zIndex:5,name:"indrzPopup"}),this.map.addOverlay(this.popup),this.map.on("singleclick",this.onMapClick,this),window.onresize=function(){setTimeout(function(){e.map.updateSize()},500)}},methods:{loadLayers:function(e){this.floors=e,this.floors&&this.floors.length&&(this.intitialFloor=this.floors.filter(function(e){return e.short_name.toLowerCase()===E.defaultStartFloor})[0],this.activeFloorName=E.layerNamePrefix+this.intitialFloor.short_name.toLowerCase(),this.$emit("selectFloor",this.activeFloorName)),this.wmsLayerInfo=ce.getWmsLayers(this.floors),this.layers.layerGroups.push(this.wmsLayerInfo.layerGroup),this.layers.switchableLayers=this.wmsLayerInfo.layers,this.map.addLayer(this.wmsLayerInfo.layerGroup),this.loadMapWithParams(),this.onFloorClick(this.activeFloorName)},onSearchSelect:function(e){var t=e.data,o=t.building,r=t.properties.name;this.globalSearchInfo.searchText=r,this.objCenterCoords=t.properties.centerGeometry.coordinates,this.searchLayer=ce.searchIndrz(this.map,this.layers,this.globalPopupInfo,this.searchLayer,o,r,20,this.popUpHomePage,this.currentPOIID,this.currentLocale,this.objCenterCoords,this.routeToValTemp,this.routeFromValTemp,this.activeFloorName,this.popup,t)},loadMapWithParams:function(){var e=C.a.parse(location.search),t=e.campus||1,o=e.zlevel||18;0!==e.centerx&&0!==e.centery&&!1===isNaN(e.centerx)&&this.map.getView().animate({zoom:o},{center:[e.centerx,e.centery]});e.floor&&(this.activeFloorName=e.floor,ce.activateLayer(this.activeFloorName,this.layers.switchableLayers),this.$emit("selectFloor",this.activeFloorName)),e.q&&e.q.length>3&&(this.searchLayer=ce.searchIndrz(this.map,this.layers,this.globalPopupInfo,this.searchLayer,t,e.q,o,this.popUpHomePage,this.currentPOIID,this.currentLocale,this.objCenterCoords,this.routeToValTemp,this.routeFromValTemp,this.activeFloorName,this.popup))},openIndrzPopup:function(e,t,o){X.openIndrzPopup(this.globalPopupInfo,this.popUpHomePage,this.currentPOIID,this.currentLocale,this.objCenterCoords,this.routeToValTemp,this.routeFromValTemp,this.activeFloorName,this.popup,e,t,o)},closeIndrzPopup:function(){X.closeIndrzPopup(this.popup,this.globalPopupInfo)},onShareButtonClick:function(){var e=this.$refs.shareOverlay,t=X.handleShareClick(this.map,this.globalPopupInfo,this.globalRouteInfo,this.globalSearchInfo,this.activeFloorName);e.setShareLink(t),e.show()},onMapClick:function(e){var t=this,o=e.pixel,r=this.map.getFeaturesAtPixel(o),n=[];this.map.forEachFeatureAtPixel(o,function(e,t){n.push(e)}),r=n[0];var c=this.map.getCoordinateFromPixel(o),d=r?r.getProperties():null;if(r){var m=r.getGeometry().getType().toString();"MultiPolygon"===m||"MultiPoint"===m?(X.closeIndrzPopup(this.popup,this.globalPopupInfo),"MultiPoint"===m&&(d.poiId=r.getId(),d.src="poi"),this.openIndrzPopup(d,c,r),ce.activateFloor(r,this.layers)):"Point"===m&&(X.closeIndrzPopup(this.popup,this.globalPopupInfo),c=this.map.getCoordinateFromPixel(o),d.src="poi",r.getProperties().hasOwnProperty("poi_id")&&(d.poiId=r.properties.poi_id),this.openIndrzPopup(d,c,r),ce.activateFloor(r,this.layers))}else{var f=this.map.getFeaturesAtPixel(o),h=this.map.getView().getResolution(),v=X.getRoomInfo(this.activeFloorName,this.layers).getGetFeatureInfoUrl(c,h,"EPSG:3857",{INFO_FORMAT:"application/json",FEATURE_COUNT:50});v&&l.a.get(v).then(function(e){t.globalPopupInfo.src="wms";var o=e.data&&e.data.features?e.data.features:[],r={};o.length>0&&(o.forEach(function(e){if(e.properties.hasOwnProperty("space_type_id")&&(e.properties.hasOwnProperty("room_code")||e.properties.hasOwnProperty("roomcode"))){var t=new x.a({features:(new w.a).readFeatures(e)}),o=Object(_.x)(t.getExtent());r.properties=e.properties,r.centroid=o}}),r.properties.src="wms",t.openIndrzPopup(r.properties,r.centroid,f))})}},onMapSwitchClick:function(){var e=this.layers.baseLayers;if(this.isSatelliteMap=!this.isSatelliteMap,this.isSatelliteMap)return e.ortho30cmBmapat.setVisible(!1),void e.greyBmapat.setVisible(!0);e.ortho30cmBmapat.setVisible(!0),e.greyBmapat.setVisible(!1)},onMenuButtonClick:function(e){switch(e){case"zoom-home":this.view.animate({center:ce.getStartCenter(),duration:2e3,zoom:17});break;case"download":this.map.once("postcompose",function(e){var canvas=e.context.canvas,t=new Date;canvas.toBlob&&canvas.toBlob(function(e){Object(c.saveAs)(e,t.toLocaleDateString()+"_map.png")},"image/png")}),this.map.renderSync();break;case"share-map":X.updateUrl("map",this.map,this.globalPopupInfo,this.globalRouteInfo,this.globalSearchInfo,this.activeFloorName);var t=this.$refs.shareOverlay;t.setShareLink(location.href),t.show()}},onLocationClick:function(e){this.view.animate({center:e.coordinates,duration:2e3,zoom:17})},onFloorClick:function(e){this.activeFloorName=e,ce.activateLayer(this.activeFloorName,this.layers.switchableLayers)},setGlobalRoute:function(e){this.globalRouteInfo[e.routeType]=e.data},routeGo:function(){ye(this.map,this.globalRouteInfo)}}},je=(o(444),Object(we.a)(Ne,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fill-height"},[o("div",{staticClass:"fill-height fluid flat width='100%' style='border-radius: 0",attrs:{id:e.mapId}}),e._v(" "),o("div",{staticClass:"indrz-zoom-control",attrs:{id:"zoom-control"}}),e._v(" "),o("div",{attrs:{id:"id-map-switcher-widget"}},[o("v-btn",{staticClass:"pa-2",attrs:{id:"id-map-switcher",color:"rgba(0,60,136,0.5)","min-width":"95px",small:"",dark:""},on:{click:e.onMapSwitchClick}},[e._v("\n      "+e._s(e.isSatelliteMap?"Satellite":"Map")+"\n    ")])],1),e._v(" "),o("info-overlay",{on:{closeClick:e.closeIndrzPopup,shareClick:e.onShareButtonClick}}),e._v(" "),o("share-overlay",{ref:"shareOverlay"})],1)},[],!1,null,"74d6799e",null)),Be=je.exports;ke()(je,{VBtn:Ce.a});var Ee,Ae={name:"CampusLocations",data:function(){return{loading:!0,locations:[]}},mounted:(Ee=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchLocations();case 2:(t=e.sent)&&t.data&&t.data.results&&(this.locations=t.data.results),this.loading=!1;case 5:case"end":return e.stop()}},e,this)})),function(){return Ee.apply(this,arguments)}),methods:{onLocationClick:function(e){this.$emit("locationClick",e.centroid)},fetchLocations:function(){return Y.request({endPoint:"campus"})}}},Ue=o(370),qe=o(316),He=o(225),De=o(372),We=o(358),Xe=Object(we.a)(Ae,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"text-center"},[e.loading?o("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):e._e()],1),e._v(" "),e.loading?e._e():o("v-list",{attrs:{dense:"",nav:""}},[o("v-list-item-group",{attrs:{color:"primary"}},e._l(e.locations,function(t,i){return o("v-list-item",{key:i,on:{click:function(o){return o.stopPropagation(),e.onLocationClick(t)}}},[o("v-list-item-content",[o("v-list-item-title",{domProps:{textContent:e._s(t.campus_name)}})],1)],1)}),1)],1)],1)},[],!1,null,null,null),Je=Xe.exports;ke()(Xe,{VList:Ue.a,VListItem:qe.a,VListItemContent:He.a,VListItemGroup:De.a,VListItemTitle:He.b,VProgressCircular:We.a});var Ye=o(529),filter=o(519),Ze=o(530),Qe=o(520),Ke={props:{isRoute:{type:Boolean,default:function(){return!1}},routeLabel:{type:String,default:function(){return""}},routeType:{type:String,default:function(){return"from"}},icon:{type:String,default:function(){return""}}},data:function(){return{searchLabel:this.$t("search_our_campus"),noResultText:"No result found",serachItemLimit:100,searchResult:[],isLoading:!1,term$:new Ye.a,model:null,search:null}},watch:{search:function(text){this.term$.next(text)}},mounted:function(){var e=this;this.term$.pipe(Object(filter.a)(function(e){return e&&e.length>2}),Object(Ze.a)(500),Object(Qe.a)()).subscribe(function(t){return e.apiSearch(t)})},methods:{apiSearch:function(e){var t=this;this.isLoading=!0,Y.request({endPoint:"search/"+e}).then(function(e){e&&e.data&&(t.searchResult=e.data.features.filter(function(e){return e.properties&&e.properties.name}),t.searchResult.length>100&&(t.searchResult=t.searchResult.slice(0,t.serachItemLimit)))}).catch(function(e){console.log(e)}).finally(function(){return t.isLoading=!1})},onSearchSelection:function(e){this.$emit("selectSearhResult",{data:e,routeType:this.routeType})},getValue:function(){return this.model}}},et=o(528),tt=Object(we.a)(Ke,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.isRoute?[o("v-autocomplete",{attrs:{items:e.searchResult,loading:e.isLoading,"search-input":e.search,"item-text":"properties.name","item-value":"properties.spaceid","prepend-icon":e.icon,"append-icon":"mdi-magnify","no-data-text":e.noResultText,"no-filter":!0,"single-line":"","return-object":"",flat:"","hide-selected":"","hide-details":"","hide-no-data":"",label:e.routeLabel},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},change:e.onSearchSelection},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:[o("v-autocomplete",{attrs:{items:e.searchResult,loading:e.isLoading,"search-input":e.search,"item-text":"properties.name","item-value":"properties.spaceid","append-icon":"mdi-magnify","no-data-text":e.noResultText,"no-filter":!0,"single-line":"","return-object":"",solo:"",flat:"","hide-selected":"","hide-details":"","hide-no-data":"",label:e.searchLabel},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},change:e.onSearchSelection},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]],2)},[],!1,null,"51b9a478",null),at=tt.exports;ke()(tt,{VAutocomplete:et.a});var ot={name:"Route",components:{CampusSearch:at},data:function(){return{barrierFree:!1,startRouteLabel:this.$t("start_route"),endRouteLabel:this.$t("end_route"),barrierFreeLabel:this.$t("barrier_free_route"),goLabel:this.$t("go"),fromRoute:null,toRoute:null}},computed:{isRouteAvailable:function(){return this.fromRoute&&this.toRoute}},methods:{onSearchSelect:function(e){this[e.routeType+"Route"]=e.data,this.$emit("setGlobalRoute",e)},onGoButtonClick:function(){this.$emit("routeGo")}}},nt=o(534),it=Object(we.a)(ot,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("campus-search",{ref:"fromRoute",attrs:{"is-route":!0,icon:"mdi-flag","route-type":"from","route-label":e.startRouteLabel},on:{selectSearhResult:e.onSearchSelect}}),e._v(" "),o("campus-search",{ref:"toRoute",attrs:{"is-route":!0,icon:"mdi-flag-checkered","route-type":"to","route-label":e.endRouteLabel},on:{selectSearhResult:e.onSearchSelect}}),e._v(" "),o("v-checkbox",{attrs:{label:e.barrierFreeLabel},model:{value:e.barrierFree,callback:function(t){e.barrierFree=t},expression:"barrierFree"}}),e._v(" "),o("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"blue-grey",disabled:!e.isRouteAvailable},on:{click:e.onGoButtonClick}},[o("v-icon",{attrs:{left:"",dark:""}},[e._v("\n      mdi-run\n    ")]),e._v(" "),o("span",[e._v(e._s(e.goLabel)+"!")])],1)],1)},[],!1,null,null,null),st=it.exports;ke()(it,{VBtn:Ce.a,VCheckbox:nt.a,VIcon:Pe.a});var lt=o(476),ct={name:"PointsOfInterest",data:function(){return{open:["public"],files:{html:"mdi-language-html5",js:"mdi-nodejs",json:"mdi-json",md:"mdi-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",txt:"mdi-file-document-outline",xls:"mdi-file-excel"},tree:[],items:lt}}},pt=(o(477),o(533)),ut=Object(we.a)(ct,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-treeview",{staticClass:"poi",attrs:{open:e.open,items:e.items,activatable:"","item-key":"name","open-on-click":"",dense:""},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,n=t.open;return[r.icon?o("v-icon",[e._v("\n      mdi-"+e._s(r.icon)+"\n    ")]):o("v-icon",[e._v("\n      "+e._s(n?"mdi-folder-open":"mdi-folder")+"\n    ")])]}}]),model:{value:e.tree,callback:function(t){e.tree=t},expression:"tree"}})},[],!1,null,"2873a204",null),mt=ut.exports;ke()(ut,{VIcon:Pe.a,VTreeview:pt.a});var ft={name:"SideBar",components:{CampusLocations:Je,Route:st,PointsOfInterest:mt},data:function(){return{locale:{campusLocations:this.$t("campus_locations"),route:this.$t("route"),pointsOfInterest:this.$t("points_of_interest"),zooToHome:this.$t("zoom_to_home"),shareMap:this.$t("share_map"),download:this.$t("download"),pdf:this.$t("pdf")}}},computed:{menuItems:function(){return[{type:"CampusLocations",title:this.locale.campusLocations},{type:"Route",title:this.locale.route},{type:"PointsOfInterest",title:this.locale.pointsOfInterest}]},menuButtons:function(){return[{icon:"home",type:"zoom-home",text:this.locale.zooToHome},{icon:"share",type:"share-map",text:this.locale.shareMap},{icon:"download",type:"download",text:this.locale.download},{icon:"file-pdf-outline",type:"pdf",text:this.locale.pdf}]}},methods:{onMenuBUttonClick:function(e){this.$emit("menuButtonClick",e.type)},onLocationClick:function(e){this.$emit("locationClick",e)},onSetGlobalRoute:function(e){this.$emit("setGlobalRoute",e)},onRouteGo:function(){this.$emit("routeGo")}}},ht=o(521),bt=o(522),gt=o(523),vt=o(524),yt=o(317),xt=Object(we.a)(ft,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-expansion-panels",e._l(e.menuItems,function(t){return o("v-expansion-panel",{key:t.title},[o("v-expansion-panel-header",[e._v(e._s(t.title))]),e._v(" "),o("v-expansion-panel-content",[o(t.type,{tag:"component",on:{locationClick:e.onLocationClick,setGlobalRoute:e.onSetGlobalRoute,routeGo:e.onRouteGo}})],1)],1)}),1),e._v(" "),o("v-list",{staticClass:"mt-5",attrs:{nav:"",dense:""}},[o("v-list-item-group",{attrs:{color:"primary"}},e._l(e.menuButtons,function(t,i){return o("v-list-item",{key:i,on:{click:function(o){return o.stopPropagation(),e.onMenuBUttonClick(t)}}},[o("v-list-item-icon",[o("v-icon",[e._v("mdi-"+e._s(t.icon))])],1),e._v(" "),o("v-list-item-content",[o("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1)],1)}),1)],1)],1)},[],!1,null,null,null),wt=xt.exports;ke()(xt,{VExpansionPanel:ht.a,VExpansionPanelContent:bt.a,VExpansionPanelHeader:gt.a,VExpansionPanels:vt.a,VIcon:Pe.a,VList:Ue.a,VListItem:qe.a,VListItemContent:He.a,VListItemGroup:De.a,VListItemIcon:yt.a,VListItemTitle:He.b});o(287),o(32),o(38);var _t={props:{floors:{type:Array,default:function(){return[]}}},data:function(){return{setSelection:null}},watch:{floors:function(){this.setSelection&&this.selectFloorWithCss(this.setSelection)}},methods:{fetchFloors:function(){return Y.request({endPoint:"floor"})},onFloorClick:function(e,t){var o=E.layerNamePrefix+e.short_name.toLowerCase();this.$emit("floorClick",o),this.selectFloorWithCss(e.short_name.toLowerCase(),t)},selectFloorWithCss:function(e,t){var o=this;e.includes(E.layerNamePrefix)&&(e=e.split(E.layerNamePrefix)[1]),setTimeout(function(){var r=o.$el.querySelectorAll("[role=listitem]"),n=o.floors.findIndex(function(t){return t.short_name.toLowerCase()===e});r.forEach(function(e){e.classList.remove("v-list-item--active","v-list-item--link")}),r[n].classList.add("v-list-item--active","v-list-item--link"),t||r[n].scrollIntoView()},500)}}},kt=(o(484),Object(we.a)(_t,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{staticClass:"mx-auto floor-changer",attrs:{"max-height":"400px"}},[o("v-list",{attrs:{dense:""}},[o("v-list-item-group",{attrs:{mandatory:"",color:"primary"}},e._l(e.floors,function(t,i){return o("v-list-item",{key:i,on:{click:function(o){return o.stopPropagation(),e.onFloorClick(t,!0)}}},[o("v-list-item-content",[o("v-list-item-title",{domProps:{textContent:e._s(t.short_name)}})],1)],1)}),1)],1)],1)},[],!1,null,"5d67741a",null)),Ct=kt.exports;ke()(kt,{VCard:ze.a,VList:Ue.a,VListItem:qe.a,VListItemContent:He.a,VListItemGroup:De.a,VListItemTitle:He.b});var Pt={components:{Sidebar:wt,IndrzMap:Be,FloorChanger:Ct,CampusSearch:at},data:function(){return{clipped:!1,drawer:!1,fixed:!1,floors:[],loading:!0,items:[{icon:"mdi-apps",title:"Home",to:"/"}],picker:(new Date).toISOString().substr(0,10),miniVariant:!1,mapId:"mapContainer",map:null,mapElName:"mapCard"}},watch:{search:function(text){!text||text.length<3||this.term$.next(text)}},mounted:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFloors();case 2:(t=e.sent)&&t.data&&t.data.results&&(this.floors=t.data.results,this.$refs.map.loadLayers(this.floors)),this.loading=!1,this.setSelection&&this.selectFloorWithCss(this.setSelection);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{fetchFloors:function(){return Y.request({endPoint:"floor"})},onDrawerClick:function(){this.$emit("onDrawerClick")},onMapClick:function(e){e.target.getAttribute("name")===this.mapElName&&console.log("Map Event")},onMenuButtonClick:function(e){this.$refs.map.onMenuButtonClick(e)},onLocationClick:function(e){this.$refs.map.onLocationClick(e)},onFloorClick:function(e){this.$refs.map.onFloorClick(e)},onFloorSelect:function(e){this.$refs.floorChanger.setSelection=e},onSearchSelect:function(e){this.$refs.map.onSearchSelect(e)},onSetGlobalRoute:function(e){this.$refs.map.setGlobalRoute(e)},onRouteGo:function(){this.$refs.map.routeGo()}}},It=(o(486),o(525)),St=o(531),Lt=o(526),zt=Object(we.a)(Pt,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{staticClass:"fill-height",staticStyle:{"border-radius":"0"},attrs:{fluid:"",flat:"",name:e.mapElName,width:"100%",ripple:!1},on:{click:function(t){return t.stopPropagation(),e.onMapClick(t)}}},[o("v-navigation-drawer",{attrs:{absolute:"",bottom:"",temporary:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[o("sidebar",{attrs:{"menu-items":e.items},on:{menuButtonClick:e.onMenuButtonClick,locationClick:e.onLocationClick,setGlobalRoute:e.onSetGlobalRoute,routeGo:e.onRouteGo}})],1),e._v(" "),o("v-toolbar",{staticClass:"ma-2",attrs:{dense:"",floating:"","max-width":"320px"}},[o("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),o("campus-search",{on:{selectSearhResult:e.onSearchSelect}})],1),e._v(" "),o("indrz-map",{ref:"map",on:{selectFloor:e.onFloorSelect}}),e._v(" "),o("floor-changer",{ref:"floorChanger",attrs:{floors:e.floors},on:{floorClick:e.onFloorClick}})],1)},[],!1,null,"7a1e41f8",null);t.default=zt.exports;ke()(zt,{VAppBarNavIcon:It.a,VCard:ze.a,VNavigationDrawer:St.a,VToolbar:Lt.a})}}]);